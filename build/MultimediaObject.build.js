var MultimediaObject=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),s=window.setTimeout(function(){e(i+n)},n);return t=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},n=function(t){var e=t.constructor.toString();return e.match(/function (.*)\(/)[1]},s=function(){function e(i){t(this,e),this.obj={},i&&this.add(i)}return e.prototype.contains=function(t){return 1===this.obj[t]},e.prototype.add=function(t){var e=void 0,i=void 0,s=void 0;if("string"!=typeof t&&"number"!=typeof t&&n(t).indexOf("Array")<0)throw new Error("you can only add an array, a string or a number");if("string"==typeof t||"number"==typeof t)this.obj[t]=1;else for(e=0,i=t.length;e<i;e++)s=t[e],this.obj[s]=1},e}(),r=["baselineShift","border","borderBottom","borderBottomLeftRadius","borderBottomRightRadius","borderBottomWidth","borderImageOutset","borderImageWidth","borderLeft","borderLeftWidth","borderRadius","borderRight","borderRightWidth","borderSpacing","borderTop","borderTopLeftRadius","borderTopRightRadius","borderTopWidth","borderWidth","bottom","columnGap","columnRule","columnRuleWidth","columnWidth","cx","cy","flexBasis","fontSize","left","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","maxHeight","maxWidth","minHeight","minWidth","motion","offset","offsetDistance","outlineOffset","outlineWidth","paddingBottom","paddingLeft","paddingRight","paddingTop","perspective","r","right","rx","ry","shapeMargin","size","strokeDasharray","strokeDashoffset","strokeWidth","tabSize","textIndent","top","webkitBorderAfterWidth","webkitBorderBeforeWidth","webkitBorderEndWidth","webkitBorderHorizontalSpacing","webkitBorderStartWidth","webkitBorderVerticalSpacing","webkitFontSizeDelta","webkitLogicalHeight","webkitLogicalWidth","webkitMarginAfter","webkitMarginBefore","webkitMarginEnd","webkitMarginStart","webkitMaskBoxImageOutset","webkitMaskBoxImageWidth","webkitMaskPosition","webkitMaskPositionX","webkitMaskPositionY","webkitMaskSize","webkitMaxLogicalHeight","webkitMaxLogicalWidth","webkitMinLogicalHeight","webkitMinLogicalWidth","webkitPaddingAfter","webkitPaddingBefore","webkitPaddingEnd","webkitPaddingStart","webkitPerspectiveOriginX","webkitPerspectiveOriginY","webkitTextStroke","webkitTextStrokeWidth","width","height","wordSpacing","x","y","baseline-shift","border-bottom","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-image-outset","border-image-width","border-left","border-left-width","border-radius","border-right","border-right-width","border-spacing","border-top","border-top-left-radius","border-top-right-radius","border-top-width","border-width","column-gap","column-rule","column-rule-width","column-width","flex-basis","font-size","letter-spacing","line-height","margin-bottom","margin-left","margin-right","margin-top","max-height","max-width","min-height","min-width","offset-distance","outline-offset","outline-width","padding-bottom","padding-left","padding-right","padding-top","shape-margin","stroke-dasharray","stroke-dashoffset","stroke-width","tab-size","text-indent","webkit-border-after-width","webkit-border-before-width","webkit-border-end-width","webkit-border-horizontal-spacing","webkit-border-start-width","webkit-border-vertical-spacing","webkit-font-size-delta","webkit-logical-height","webkit-logical-width","webkit-margin-after","webkit-margin-before","webkit-margin-end","webkit-margin-start","webkit-mask-box-image-outset","webkit-mask-box-image-width","webkit-mask-position","webkit-mask-position-x","webkit-mask-position-y","webkit-mask-size","webkit-max-logical-height","webkit-max-logical-width","webkit-min-logical-height","webkit-min-logical-width","webkit-padding-after","webkit-padding-before","webkit-padding-end","webkit-padding-start","webkit-text-stroke","webkit-text-stroke-width","webkit-transform-origin-x","webkit-transform-origin-y","webkit-transform-origin-z","word-spacing","translateX","translateY","translateZ","translate-x","translate-y","translate-z","translate"],o=["background","flex","flexGrow","flexShrink","objectPosition","transformOrigin","alignContent","alignItems","alignSelf","alignmentBaseline","all","animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","backfaceVisibility","background","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundRepeatX","backgroundRepeatY","borderBottomColor","borderBottomStyle","borderCollapse","borderColor","borderImage","borderImageRepeat","borderImageSlice","borderImageSource","borderLeftColor","borderLeftStyle","borderRightColor","borderRightStyle","borderStyle","borderTopColor","borderTopStyle","boxShadow","boxSizing","breakAfter","breakBefore","breakInside","bufferedRendering","captionSide","clear","clip","clipPath","clipRule","color","colorInterpolation","colorInterpolationFilters","colorRendering","columnCount","columnFill","columnRuleColor","columnRuleStyle","columnSpan","columns","contain","content","counterIncrement","counterReset","cursor","d","direction","display","dominantBaseline","emptyCells","fill","fillOpacity","fillRule","filter","flexDirection","flexFlow","flexWrap","float","floodColor","floodOpacity","font","fontFamily","fontFeatureSettings","fontKerning","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantLigatures","fontVariantNumeric","fontWeight","hyphens","imageRendering","isolation","justifyContent","lightingColor","listStyle","listStyleImage","listStylePosition","listStyleType","marker","markerEnd","markerMid","markerStart","mask","maskType","maxZoom","minZoom","mixBlendMode","objectFit","offsetPath","offsetRotation","opacity","order","orientation","orphans","outline","outlineColor","outlineStyle","overflow","overflowWrap","overflowX","overflowY","page","pageBreakAfter","pageBreakBefore","pageBreakInside","paintOrder","perspectiveOrigin","pointerEvents","position","quotes","resize","shapeImageThreshold","shapeOutside","shapeRendering","speak","src","stopColor","stopOpacity","stroke","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","tableLayout","textAlign","textAlignLast","textAnchor","textCombineUpright","textDecoration","textOrientation","textOverflow","textRendering","textShadow","textSizeAdjust","textTransform","touchAction","transform","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","unicodeBidi","unicodeRange","userSelect","userZoom","vectorEffect","visibility","vertical-align","verticalAlign","webkitAppRegion","webkitAppearance","webkitBackgroundClip","webkitBackgroundOrigin","webkitBorderAfter","webkitBorderAfterColor","webkitBorderAfterStyle","webkitBorderBefore","webkitBorderBeforeColor","webkitBorderBeforeStyle","webkitBorderEnd","webkitBorderEndColor","webkitBorderEndStyle","webkitBorderImage","webkitBorderStart","webkitBorderStartColor","webkitBorderStartStyle","webkitBoxAlign","webkitBoxDecorationBreak","webkitBoxDirection","webkitBoxFlex","webkitBoxFlexGroup","webkitBoxLines","webkitBoxOrdinalGroup","webkitBoxOrient","webkitBoxPack","webkitBoxReflect","webkitColumnBreakAfter","webkitColumnBreakBefore","webkitColumnBreakInside","webkitFontSmoothing","webkitHighlight","webkitHyphenateCharacter","webkitLineBreak","webkitLineClamp","webkitLocale","webkitMarginAfterCollapse","webkitMarginBeforeCollapse","webkitMarginBottomCollapse","webkitMarginCollapse","webkitMarginTopCollapse","webkitMask","webkitMaskBoxImage","webkitMaskBoxImageRepeat","webkitMaskBoxImageSlice","webkitMaskBoxImageSource","webkitMaskClip","webkitMaskComposite","webkitMaskImage","webkitMaskOrigin","webkitMaskRepeat","webkitMaskRepeatX","webkitMaskRepeatY","webkitPrintColorAdjust","webkitRtlOrdering","webkitRubyPosition","webkitTapHighlightColor","webkitTextCombine","webkitTextDecorationsInEffect","webkitTextEmphasis","webkitTextEmphasisColor","webkitTextEmphasisPosition","webkitTextEmphasisStyle","webkitTextFillColor","webkitTextOrientation","webkitTextSecurity","webkitTextStrokeColor","webkitUserDrag","webkitUserModify","webkitWritingMode","whiteSpace","widows","willChange","wordBreak","wordWrap","writingMode","zIndex","zoom","flex-grow","flex-shrink","object-position","transform-origin","align-content","align-items","align-self","alignment-baseline","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-repeat-x","background-repeat-y","border-bottom-color","border-bottom-style","border-collapse","border-color","border-image","border-image-repeat","border-image-slice","border-image-source","border-left-color","border-left-style","border-right-color","border-right-style","border-style","border-top-color","border-top-style","box-shadow","box-sizing","break-after","break-before","break-inside","buffered-rendering","caption-side","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-rendering","column-count","column-fill","column-rule-color","column-rule-style","column-span","counter-increment","counter-reset","dominant-baseline","empty-cells","fill-opacity","fill-rule","flex-direction","flex-flow","flex-wrap","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-stretch","font-style","font-variant","font-variant-caps","font-variant-ligatures","font-variant-numeric","font-weight","image-rendering","justify-content","lighting-color","list-style","list-style-image","list-style-position","list-style-type","marker-end","marker-mid","marker-start","mask-type","max-zoom","min-zoom","mix-blend-mode","object-fit","offset-path","offset-rotation","outline-color","outline-style","overflow-wrap","overflow-x","overflow-y","page-break-after","page-break-before","page-break-inside","paint-order","perspective-origin","pointer-events","shape-image-threshold","shape-outside","shape-rendering","stop-color","stop-opacity","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","touch-action","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","unicode-range","user-select","user-zoom","vector-effect","webkit-app-region","webkit-appearance","webkit-background-clip","webkit-background-origin","webkit-border-after","webkit-border-after-color","webkit-border-after-style","webkit-border-before","webkit-border-before-color","webkit-border-before-style","webkit-border-end","webkit-border-end-color","webkit-border-end-style","webkit-border-image","webkit-border-start","webkit-border-start-color","webkit-border-start-style","webkit-box-align","webkit-box-decoration-break","webkit-box-direction","webkit-box-flex","webkit-box-flex-group","webkit-box-lines","webkit-box-ordinal-group","webkit-box-orient","webkit-box-pack","webkit-box-reflect","webkit-column-break-after","webkit-column-break-before","webkit-column-break-inside","webkit-font-smoothing","webkit-highlight","webkit-hyphenate-character","webkit-line-break","webkit-line-clamp","webkit-locale","webkit-margin-after-collapse","webkit-margin-before-collapse","webkit-margin-bottom-collapse","webkit-margin-collapse","webkit-margin-top-collapse","webkit-mask","webkit-mask-box-image","webkit-mask-box-image-repeat","webkit-mask-box-image-slice","webkit-mask-box-image-source","webkit-mask-clip","webkit-mask-composite","webkit-mask-image","webkit-mask-origin","webkit-mask-repeat","webkit-mask-repeat-x","webkit-mask-repeat-y","webkit-print-color-adjust","webkit-rtl-ordering","webkit-ruby-position","webkit-tap-highlight-color","webkit-text-combine","webkit-text-decorations-in-effect","webkit-text-emphasis","webkit-text-emphasis-color","webkit-text-emphasis-position","webkit-text-emphasis-style","webkit-text-fill-color","webkit-text-orientation","webkit-text-security","webkit-text-stroke-color","webkit-user-drag","webkit-user-modify","webkit-writing-mode","white-space","will-change","word-break","word-wrap","writing-mode","z-index","zoom"],a={Atoms:{block:"div",div:"div",header:"header",footer:"footer",aside:"aside",article:"article",main:"main",nav:"nav",navigation:"nav",span:"span",text:"p",p:"p",paragraphe:"p","ulist-container":"ul",ulist:"ul",ul:"ul","unordered-list":"ul","olist-container":"ol",olist:"ol",ol:"ol","ordered-list":"ol","list-element":"li",li:"li",code:"pre",pre:"pre",input:"input",textarea:"textarea",form:"form",image:"img",img:"img",button:"button",iframe:"iframe",video:"video",canvas:"canvas",audio:"audio"},regex:{DOMEvent:new RegExp("^(click|mousedown|mouseup|mousemove|change|touchstart|touchmove|touchend|input|focus|dlclick|mouseenter|mouseleave|mouseover|mouseout|blur|search|submit|play|pause|canplay|progress)$"),animatableProps:new RegExp("^(background-color|translate|scale|rotate|skew|margin|padding|top|left|right|bottom|color|font-size|width|height|opacity)$")},sets:{pxProperties:r,degProperties:["rotate","rotate-x","rotate-y","rotate-z","rotate-x","rotate-y","rotate-z","skew","skewX","skewY","skewZ","skew-x","skew-y","skew-z"],transformProperties:["translate","translateX","translateY","translateZ","translateX","translate-x","translateY","translate-y","translate-z","scale","scaleX","scaleY","scaleZ","scale-x","scale-y","scale-z","rotate","rotateX","rotateY","rotateZ","rotate-x","rotate-y","rotate-z","skew","skewX","skewY","skewZ","skew-x","skew-y","skew-z","perspective","perspectiveX","perspectiveY","perspectiveZ","perspective-x","perspective-y","perspective-z"],styleProperties:o}},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block",e=a.Atoms;return e[t]},d=function(t,e,i){var n=function(){throw new Error(i)};try{e()}catch(t){n()}finally{("string"==typeof t||"number"==typeof t||t instanceof Array)&&n()}},h=function(t){return"undefined"==typeof t||""===t||"false"!==t&&Boolean(t)!==!1&&Boolean(t)},u=function(t){return a.regex.DOMEvent.test(t)},c=function(t,e){for(var i=e.sort(function(t,e){return t-e}),n=void 0,s=0;s<i.length;s++){var r=s;if(n=i[s],s>0&&(r=s-1),t<i[s]){n=t-i[r]<i[s]-t?i[r]:i[s];break}}return n},p=new s(a.sets.pxProperties),m=new s(a.sets.degProperties),f=new s(a.sets.transformProperties),b=new s(a.sets.styleProperties),g=function(t){return a.regex.animatableProps.test(t)},w=function(t){if("string"==typeof t){var e=t.match(/-(?=\d)|\d+|\.\d+/g);return null!==e?parseFloat(e.join("")):0}return"number"!=typeof parseFloat(t)||isNaN(parseFloat(t))?0:parseFloat(t)},k=function(t){var e="";if("string"==typeof t){var i=t.match?t.match(/%|px|vh|vw|em|deg/g):null;e=null!==i?i[0]:""}return e},y=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},v=function(t){var e=t.split("-"),i=["Webkit","Moz","ms"],n=void 0,s=void 0,r=void 0,o=void 0,a=void 0,l=void 0,d=void 0,h=void 0;if(void 0!==document.body.style[t])return"";for(h="",n=0,o=e.length;n<o;n++)d=e[n],h+=d.substring(0,1).toUpperCase()+d.substring(1);for(s=0,a=i.length;s<a;s++)if(l=i[s],r=l+h,void 0!==document.body.style[r])return l;return""},x=function(t){var e=v(t);return"Moz"===e?""+e+(t.substring(0,1).toUpperCase()+t.substring(1)):""!==e?"-"+e.toLowerCase()+"-"+y(t):y(t)},A=function(t,e){if(p.contains(t)){var i=k(e);return""!==i?i:"px"}return m.contains(t)?"deg":f.contains(t)?"":(b.contains(t),"")},S=function(t){if(t instanceof Array){var e=void 0,i=t.filter(function(t){return!isNaN(parseFloat(t))});return i.length>0&&(e=Math.max.apply(null,i)),e=isNaN(e)?0:e}throw new Error("getMaxOfArray only works on an array")},I=function(t,e){if(!f.contains(t))throw new Error(t+" is not a transform property");var i=0,n=void 0;i="string"==typeof e&&e.indexOf(",")>=0?e.split(","):w(e),n=A(t,e),t.indexOf("scale")>=0?n="":m.contains(t)&&(n="deg");var s=t+"("+i+n+")";if(i instanceof Array){i=i.map(function(t){return w(t)});var r="";i.forEach(function(t,e){r+=e>0?", "+t+n:""+t+n}),s=t+"("+r+")"}return{string:s,unit:n,value:i}},E=function(){var t=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(t+=performance.now());var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)});return e},P=function(t){return"#"===t.charAt(0)?t.substring(1,7):t},O=function(t){return parseInt(P(t).substring(0,2),16)},M=function(t){return parseInt(P(t).substring(2,4),16)},L=function(t){return parseInt(P(t).substring(4,6),16)},B=function(t){var e=void 0;if("#"===t[0])e={r:O(t),g:M(t),b:L(t),a:1};else{var i="string"==typeof t?t.indexOf("("):-1;i>=0&&(t=t.slice(i+1,t.length-1));var n="string"==typeof t?t.split(","):[0,0,0,0];e={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10),a:parseFloat(n[3]||1)}}return e},R={linearEase:function(t,e,i,n){return i*t/n+e},easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var s=1.70158,r=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(r||(r=.3*n),o<Math.abs(i)){o=i;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(i/o);return-(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r))+e},easeOutElastic:function(t,e,i,n){var s=1.70158,r=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(r||(r=.3*n),o<Math.abs(i)){o=i;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin((t*n-s)*(2*Math.PI)/r)+i+e},easeInOutElastic:function(t,e,i,n){var s=1.70158,r=0,o=i;if(0==t)return e;if(2==(t/=n/2))return e+i;if(r||(r=n*(.3*1.5)),o<Math.abs(i)){o=i;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(i/o);return t<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r)*.5+i+e},easeInBack:function(t,e,i,n,s){return void 0==s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,i,n,s){return void 0==s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,i,n,s){return void 0==s&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,i,n){return i-Easing.easeOutBounce(n-t,0,i,n)+e},easeOutBounce:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,i,n){return t<n/2?.5*Easing.easeInBounce(2*t,0,i,n)+e:.5*Easing.easeOutBounce(2*t-n,0,i,n)+.5*i+e}},C=function(){this.listeners={}};C.prototype={addListener:function(t,e){return this.listeners[t]?e instanceof Function&&this.listeners[t].indexOf(e)<0&&this.listeners[t].push(e):(this.listeners[t]=[],this.addListener(t,e)),this},dispatchEvent:function(t,e,i){return e=e||{},this.listeners[t]&&(i?this.listeners[t].forEach(function(t,n){t.call(i,e)}):this.listeners[t].forEach(function(t,i){t.call(window,e)})),this},removeListener:function(t,e){var i=this.listeners[t].indexOf(e);return i>0&&this.listeners[t].splice(i,1),this}};var T=new C,F=function(){function t(t,e){for(var i=0,n=t.length;i<n;++i)if(!e(t[i]))return o;return 1}function e(e,i){t(e,function(t){return i(t),1})}function i(s,r,o){function l(t){return t.call?t():h[t]}function d(){if(!--w){h[g]=1,b&&b();for(var i in c)t(i.split("|"),l)&&!e(c[i],l)&&(c[i]=[])}}s=s[a]?s:[s];var f=r&&r.call,b=f?r:o,g=f?s.join(""):r,w=s.length;return setTimeout(function(){e(s,function t(e,i){return null===e?d():(i||/^https?:\/\//.test(e)||!m||(e=e.indexOf(".js")===-1?m+e+".js":m+e),p[e]?(g&&(u[g]=1),2==p[e]?d():setTimeout(function(){t(e,!0)},0)):(p[e]=1,g&&(u[g]=1),void n(e,d)))})},0),i}function n(t,e){var i=s.createElement("script"),n=void 0;i.onload=i.onerror=i[d]=function(){i[l]&&!/^c|loade/.test(i[l])||n||(i.onload=i[d]=null,n=1,p[t]=2,e())},i.async=1,i.src=f?t+(t.indexOf("?")===-1?"?":"&")+f:t,r.insertBefore(i,r.lastChild)}var s=document,r=s.getElementsByTagName("head")[0],o=!1,a="push",l="readyState",d="onreadystatechange",h={},u={},c={},p={},m=void 0,f=void 0;return i.get=n,i.order=function(t,e,n){!function s(r){r=t.shift(),t.length?i(r,s):i(r,e,n)}()},i.path=function(t){m=t},i.urlArgs=function(t){f=t},i.ready=function(n,s,r){n=n[a]?n:[n];var o=[];return!e(n,function(t){h[t]||o[a](t)})&&t(n,function(t){return h[t]})?s():!function(t){c[t]=c[t]||[],c[t][a](s),r&&r(o)}(n.join("|")),i},i.done=function(t){i([null],t)},i},_={namespace:"_s4mConfig",container:"scene",defaultAttributes:{video:{src:"",type:"video/mp4",controls:"true",muted:"true",loop:"true",preload:"true",playsinline:"true"},img:{src:""},iframe:{src:""},form:{name:""},input:{name:""},audio:{src:""}}},U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i();var z=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"multimediaObject",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;e(this,t),"object"===("undefined"==typeof i?"undefined":U(i))?(this.name=n||i.name,this.type=i.type||"block",this._style={},this.style={},this.attributes={},this.events={},this._events={},this.functions={},this.breakpoints=[],this.selectedAnimation="default",this.currentAnimation={},this.animated=!1,this.computedAnimations=[],this.childs=[],this.dependencies=[],this.animatedProps={.02:{}},this.innerHTML="",this.fps=s,this.then=performance.now()||Date.now(),this.interval=1e3/this.fps,this.totalIteration=0,this.counter=0,this.reverse=!1,this.repeat=0,this.animationStarted=!1,this.loadFromJSON(i),this.applyFunctions(),this.addDefaultParameters(),this.init(),this.applyAttributes(),this.applyStyle(),this.applyEvents(),this.applyBreakpoints(),this.applyDependencies()):(this.uuid=E(),this.name=n,this.type=i,this.data={},this._style={},this.style={},this.attributes={},this.events={},this._events={},this.functions={},this.selectedAnimation="default",this.currentAnimation={},this.breakpoints=[],this.animated=!1,this.computedAnimations=[],this.childs=[],this.dependencies=[],this.animatedProps={.02:{}},this.innerHTML="",this.DOMParent=null,this.fps=s,this.then=performance.now()||Date.now(),this.interval=1e3/this.fps,this.totalIteration=0,this.counter=0,this.reverse=!1,this.repeat=0,this.animationStarted=!1,this.init(),this.addDefaultParameters())}return t.prototype.init=function(){var e=this;this.generate(l(this.type)),this.element.innerHTML=this.innerHTML,this.getSortedSteps(),window.MultimediaObjectEditor||(this.DOMParent instanceof t||(window[_.namespace]?this.appendElementTo(document.getElementById(window[_.namespace].containerId)):this.appendElementTo()),this.data.autostart?this.startAnimation():this.addListener("startAfterPreload",function(){return e.startAnimation()},!0)),this.attributes.id||this.applyAttributes({id:this.name}),this.addGlobalStyle()},t.prototype.addDefaultParameters=function(){if(_.defaultAttributes[this.type]&&!this.load)for(var t in _.defaultAttributes[this.type])this.attributes[t]||(this.attributes[t]=_.defaultAttributes[this.type][t]);this.data.autostart="undefined"==typeof this.data.autostart||h(this.data.autostart),this.element&&this.applyAttributes()},t.prototype.checkDep=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push",i=this.dependencies.indexOf(t);switch(e){case"splice":i>=0&&this.dependencies.splice(i,1);break;case"push":default:i<0&&this.dependencies.push(t)}},t.prototype.applyDependencies=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dependencies;return e instanceof Array?e.forEach(function(e){t.checkDep(e)}):this.checkDep(e),this},t.prototype.removeDependencies=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dependencies;return e instanceof Array?e.forEach(function(e){t.checkDep(e,"splice")}):this.checkDep(e,"splice"),this},t.prototype.requireDependencies=function(t){this.dependencies.length>0?(F(this.dependencies,"dependencies"),F.ready("dependencies",t)):t()},t.prototype.addGlobalStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.globalStyle,e=arguments[1];if(!t)return this;if("string"!=typeof t)throw new Error("addGlobalStyle: style is not a string");var i=document.createElement("style"),n=t;return i.innerHTML=n,i.id=this.uuid+"-style",i.type="text/css",document.head.appendChild(i),e&&window.setTimeout(e,100),this},t.prototype.applyStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.style,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d(t,function(){return Object.keys(t)},"style must be an object");var i=void 0,n=[],s=void 0,r=Object.keys(this._style).length;for(i in t)if(s=t[i],f.contains(i)){n.push([i,s]);var o=I(i,s),a=""+o.value+o.unit;(r<1||e)&&(this._style[i]=a),this.style[i]=a}else if(p.contains(i)){var l=""+w(s)+A(i,s);(r<1||e)&&(this._style[i]=l),this.style[i]=l,this.element.style[i]=l}else if(b.contains(i))(r<1||e)&&(this._style[i]=s),this.style[i]=s,"string"==typeof s&&s.indexOf("{{absoluteAssetURL}}")>=0&&window[_.namespace]&&(s=s.replace("{{absoluteAssetURL}}",window.MultimediaObjectEditor?this.data.absoluteAssetURL:window[_.namespace].absoluteAssetURL)),this.element.style[i]=s;else{var h=""+s+A(i,s);this.style[x(i)]=h,(r<1||e)&&(this._style[x(i)]=h),s.indexOf("{{absoluteAssetURL}}")>=0&&window[_.namespace]&&(s=s.replace("{{absoluteAssetURL}}",window.MultimediaObjectEditor?this.data.absoluteAssetURL:window[_.namespace].absoluteAssetURL)),this.element.style[x(i)]=s}var u=[0,1,2,3],c={x:this._style.translateX?w(this._style.translateX):0,y:this._style.translateY?w(this._style.translateY):0,z:this._style.translateZ?w(this._style.translateZ):0,xU:this._style.translateX?k(this._style.translateX):"px",yU:this._style.translateY?k(this._style.translateY):"px",zU:this._style.translateZ?k(this._style.translateZ):"px"},m={value:this._style.rotate?w(this._style.rotate):0,u:"deg"},g={x:this._style.skewX?w(this._style.skewX):0,y:this._style.skewY?w(this._style.skewY):0,u:"deg"},y={x:this._style.scaleX?w(this._style.scaleX):1,y:this._style.scaleY?w(this._style.scaleY):1};return n.length>0&&(s=n.map(function(t){return I(t[0],t[1]).string}),s.forEach(function(t){t.indexOf("translateX")>=0||t.indexOf("translate-x")>=0?(c.x=w(t),c.xU=k(t)):t.indexOf("translateY")>=0||t.indexOf("translate-y")>=0?(c.y=w(t),c.yU=k(t)):(t.indexOf("translateZ")>=0||t.indexOf("translate-z")>=0)&&(c.z=w(t),c.zU=k(t)),t.indexOf("rotate")>=0&&(m.value=w(t)),t.indexOf("scaleX")>=0||t.indexOf("scale-x")>=0?y.x=w(t):t.indexOf("scaleY")>=0||t.indexOf("scale-y")>=0?y.y=w(t):t.indexOf("scale")>=0&&(y.x=w(t),y.y=w(t)),t.indexOf("skewX")>=0||t.indexOf("skew-x")>=0?g.x=w(t):t.indexOf("skewY")>=0||t.indexOf("skew-y")>=0?g.y=w(t):t.indexOf("skew")>=0&&(g.x=w(t),g.y=w(t))}),u[0]="translate3d("+c.x+c.xU+","+c.y+c.yU+","+c.z+c.zU+")",u[1]="rotate("+m.value+m.u+")",u[2]="skew("+g.x+g.u+","+g.y+g.u+")",u[3]="scale("+y.x+","+y.y+")",u=u.filter(function(t){return!/^[0-9]/.test(t)}).join(" "),this.element.style[x("transform")]=u),T.dispatchEvent("actualize-style",this._style),this},t.prototype.applyFunctions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.functions;d(t,function(){return Object.keys(t)},"functions must be an object");for(var e in t)Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(this),e)||(this[e]=t[e],this.functions[e]=t[e]);return this},t.prototype.applyAttributes=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes;if(d(t,function(){return Object.keys(t)},"attributes must be an object"),Object.keys(t).length>0)for(var e in t){var i=t[e];"string"==typeof t[e]&&t[e].indexOf("{{absoluteAssetURL}}")>=0&&window[_.namespace]&&(i=t[e].replace("{{absoluteAssetURL}}",window.MultimediaObjectEditor?this.data.absoluteAssetURL:window[_.namespace].absoluteAssetURL)),this.attributes[e]=t[e],this.element.setAttribute(e,i)}return this},t.prototype.applyBreakpoints=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.breakpoints;if(!(e instanceof Array))throw new Error("breakpoints must be an array");return e.length>0&&(e.forEach(function(e){t.breakpoints.indexOf(e)===-1&&t.breakpoints.push(e)}),this.checkBreakpoints()),this},t.prototype.applyEvents=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.events,i=function(e){var i=!!("ontouchstart"in window)||!!("ontouchstart"in document.documentElement)||!!window.ontouchstart||!!window.onmsgesturechange||window.DocumentTouch&&window.document instanceof window.DocumentTouch,n=t,s={};n.evtStarted=!1,t.evtStart=function(t){t.preventDefault();var e=t.changedTouches?t.changedTouches[0]:t;n.evtStarted=!0,s={start:{left:e.pageX,top:e.pageY}}},t.evtEnd=function(t){if(t.preventDefault(),n.evtStarted){var i=t.changedTouches?t.changedTouches[0]:t;s.end={left:i.pageX,top:i.pageY},s.dx=s.end.left-s.start.left,s.dy=s.end.top-s.start.top,s.angle=Math.atan2(s.dy,s.dx),s.angle*=180/Math.PI,s.inMotion="touchmove"===t.type||"mousemove"===t.type,s.direction=Math.abs(s.dx)>Math.abs(s.dy)?(""+s.dx).indexOf("-")!==-1?"left":"right":(""+s.dy).indexOf("-")!==-1?"top":"bottom",n.events[e].apply(n,[t,s]),s.inMotion===!1&&(n.evtStarted=!1)}},i?(t.element.addEventListener("touchstart",t.evtStart,!1),
t.element.addEventListener("touchmove",t.evtEnd,!1),t.element.addEventListener("touchend",t.evtEnd,!1)):(t.element.addEventListener("mousedown",t.evtStart,!1),t.element.addEventListener("mousemove",t.evtEnd,!1),t.element.addEventListener("mouseup",t.evtEnd,!1))};if(Object.keys(e).length>0)for(var n in e)this.events[n]=e[n],this._events[n]=this.transformEvent(e[n]),"swipe"===n?i(n):u(n)?this.element.addEventListener(n,this._events[n]):this.addListener(n,this.events[n]);return this},t.prototype.removeEvent=function(t){return u(t)?this.events[t]?(this.element.removeEventListener(t,this._events[t]),delete this.events[t],delete this._events[t]):console.log("Event does not exist"):"swipe"===t?(this.element.removeEventListener("touchstart",this.evtStart),this.element.removeEventListener("touchmove",this.evtEnd),this.element.removeEventListener("touchend",this.evtEnd),this.element.removeEventListener("mousedown",this.evtStart),this.element.removeEventListener("mousemove",this.evtEnd),this.element.removeEventListener("mouseup",this.evtEnd),delete this.events[t],delete this._events[t]):this.events[t]?(this.removeListener(t,this._events[t]),delete this.events[t],delete this._events[t]):console.log("Event does not exist"),this},t.prototype.deactivateEvent=function(t){this.events[t]?u(t)?this.element.removeEventListener(t,this._events[t]):"swipe"===t?(this.element.removeEventListener("touchstart",this.evtStart),this.element.removeEventListener("touchmove",this.evtEnd),this.element.removeEventListener("touchend",this.evtEnd),this.element.removeEventListener("mousedown",this.evtStart),this.element.removeEventListener("mousemove",this.evtEnd),this.element.removeEventListener("mouseup",this.evtEnd)):this.removeListener(t,this._events[t]):console.log("Event does not exist")},t.prototype.removeFunction=function(t){return this.functions[t]?delete this.functions[t]:console.log("Function does not exist"),this},t.prototype.removePropertie=function(t,e){var i=this;switch(t){case"attributes":this.attributes[e]?(this.element.removeAttribute(e),delete this.attributes[e]):console.log(e+" attribute does not exist");break;case"data":this.data[e]?delete this.data[e]:console.log(e+" data does not exist");break;case"style":default:if(this._style[e]){this.element.style[x(e)]="",this.element.style[e]="",f.contains(e)&&(this.element.style[x("transform")]="",this.element.style.transform=""),delete this.style[e],delete this._style[e];var n=function(){for(var t=Object.keys(i._style),e=!1,n=0;n<t.length;n++)if(f.contains(t[n])){e=!0;break}return e}();n||(delete this.style.transform,delete this._style.transform,delete this.style[x("transform")],delete this._style[x("transform")])}else this.style[e]?(f.contains(e)&&(this.element.style[x("transform")]="",this.element.style.transform=""),this.element.style[x(e)]="",this.element.style[e]="",delete this.style[e]):console.log(e+" style does not exist")}return this},t.prototype.transformEvent=function(t){var e=this;return function(i){t.apply(e,[i])}},t.prototype.checkBreakpoints=function(){var t=this,e=window.MultimediaObjectEditor?"parseInt(getComputedStyle(document.getElementById('"+_.container+"')).width)":"window.innerWidth",i=window.MultimediaObjectEditor?"parseInt(getComputedStyle(document.getElementById('"+_.container+"')).height)":"window.innerHeight";this.breakpoints.length>0&&!function(){var n={};for(var s in t._style)n[s]=t._style[s];if(t.breakpoints.forEach(function(t){var s=[];for(var r in t.querie)"orientation"===r?s.push(""+("landscape"===t.querie[r]?e+" > "+i:i+" > "+e)):s.push((/height/.test(r)?i:e)+" "+(/min/.test(r)?">=":"<=")+" "+parseInt(t.querie[r],10));var o="";if(s.forEach(function(t,e){o+=e>=1?" && "+t:t}),(o=new Function("return "+o))())for(var a in t.style)n[a]=t.style[a]}),t.computedAnimations.length>0)for(var r in t.computedAnimations[t.currentIteration])n[r]=t.computedAnimations[t.currentIteration][r];t.applyStyle(n)}()},t.prototype.generate=function(t){var e=this;return this.element=document.createElement(t),this.type=t,window.addEventListener("resize",function(){e.checkBreakpoints()}),T.addListener("resize-scene",function(){e.checkBreakpoints()}),this},t.prototype.appendElementTo=function(e){var i=this;if(e){e instanceof t?e.element.appendChild(this.element):e.appendChild(this.element),this.DOMParent=e;var n=this.childs.length;n>0&&this.childs.forEach(function(t,e){t.DOMParent=i,t.appendElementTo(i)})}else{document.body.appendChild(this.element),this.DOMParent=document.body;var s=this.childs.length;s>0&&this.childs.forEach(function(t,e){t.DOMParent=i,t.appendElementTo(i)})}return this.initializer&&this.initializer(),this},t.prototype.add=function(e){return this.childs.push(e),e instanceof t?this.element.appendChild(e.element):this.element.appendChild(e),e.DOMParent=this,T.dispatchEvent("actualize-DOM-elements"),this},t.prototype.remove=function(e){var i=this.childs.indexOf(e);return i>=0&&(this.childs.splice(i,1),e instanceof t?this.element.removeChild(e.element):this.element.removeChild(e),e.DOMParent=null),T.dispatchEvent("actualize-DOM-elements"),this},t.prototype.getComputedStyle=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return getComputedStyle(this.element,null).getPropertyValue(t)}),t.prototype.preInterpolateStep=function(t){var e=this;this.getSortedSteps();var i=function(t){return Object.keys(e._events).join().indexOf(t)>=0},n=S(this.numericSteps),s=Math.floor(n*t);this.animatedProps={};for(var r=void 0,o=0;o<this.numericSteps.length;o++){var a=this.numericSteps[o].toFixed(2);for(var l in this.currentAnimation[a])if("easing"!==l){this.animatedProps[l]||(this.animatedProps[l]={},this.animatedProps[l].label=l,this.animatedProps[l].steps={}),this.animatedProps[l].steps[a]||(this.animatedProps[l].steps[a]={});var d=Object.keys(this.animatedProps[l].steps),h=d.length>1?d[d.length-2]:void 0;if(r=h?this.animatedProps[l].steps[h]:void 0,/color/gi.test(l)){var u=B(this.currentAnimation[a][l]);this.animatedProps[l].steps[a].startValue=r?r.endValue:this._style[l]?B(this._style[l]):{r:0,g:0,b:0},this.animatedProps[l].steps[a].unit="string"==typeof this.currentAnimation[a][l]?k(this.currentAnimation[a][l]||""):"",this.animatedProps[l].steps[a].endValue=u,this.animatedProps[l].steps[a].changeInValue={r:this.animatedProps[l].steps[a].endValue.r-this.animatedProps[l].steps[a].startValue.r,g:this.animatedProps[l].steps[a].endValue.g-this.animatedProps[l].steps[a].startValue.g,b:this.animatedProps[l].steps[a].endValue.b-this.animatedProps[l].steps[a].startValue.b,a:this.animatedProps[l].steps[a].endValue.a-this.animatedProps[l].steps[a].startValue.a},this.animatedProps[l].steps[a].initIteration=h?Math.floor(h*t):0,this.animatedProps[l].steps[a].totalStepIteration=Math.floor(a*t-this.animatedProps[l].steps[a].initIteration),this.animatedProps[l].steps[a].easing=this.currentAnimation[a].easing,this.animatedProps[l].steps[a].currentIteration=0}else/\d/g.test(this.currentAnimation[a][l])?(this.animatedProps[l].steps[a].startValue=parseFloat(r?r.endValue:this._style[l]?parseFloat(this._style[l]):0),this.animatedProps[l].steps[a].unit="string"==typeof this.currentAnimation[a][l]&&/px|%/g.test(this.currentAnimation[a][l])?k(this.currentAnimation[a][l]||""):"",this.animatedProps[l].steps[a].endValue=parseFloat(this.currentAnimation[a][l]),this.animatedProps[l].steps[a].changeInValue=parseFloat(this.animatedProps[l].steps[a].endValue-this.animatedProps[l].steps[a].startValue),this.animatedProps[l].steps[a].initIteration=h?Math.floor(h*t):0,this.animatedProps[l].steps[a].totalStepIteration=Math.floor(a*t)-this.animatedProps[l].steps[a].initIteration,this.animatedProps[l].steps[a].easing=this.currentAnimation[a].easing,this.animatedProps[l].steps[a].currentIteration=0):(this.animatedProps[l].steps[a].startValue=r?r.endValue:this._style[l]?this._style[l]:"auto",this.animatedProps[l].steps[a].unit="",this.animatedProps[l].steps[a].endValue=this.currentAnimation[a][l],this.animatedProps[l].steps[a].changeInValue=this.animatedProps[l].steps[a].endValue,this.animatedProps[l].steps[a].initIteration=h?Math.floor(h*t):0,this.animatedProps[l].steps[a].totalStepIteration=Math.floor(a*t)-this.animatedProps[l].steps[a].initIteration,this.animatedProps[l].steps[a].easing=this.currentAnimation[a].easing,this.animatedProps[l].steps[a].currentIteration=0)}}this.computedAnimations=!this.computedAnimations||[];for(var p in this.animatedProps)if(i(p))for(var m in this.animatedProps[p].steps){var f=Math.floor(Number(m)*this.fps);this.computedAnimations[f]||(this.computedAnimations[f]={}),this.computedAnimations[f][p]=this.animatedProps[p].steps[m].endValue}else for(var b=0;b<=s;b++){var g=Object.keys(this.animatedProps[p].steps),w=b/s*n,y=isFinite(w)?Number(w).toFixed(2):0,v=c(y,g);if(this.computedAnimations[b]||(this.computedAnimations[b]={}),/color/gi.test(p)){var x=this.animatedProps[p].steps[v].easing||"linearEase",A=this.animatedProps[p].steps[v].currentIteration,I=this.animatedProps[p].steps[v].startValue,E=this.animatedProps[p].steps[v].endValue,P=this.animatedProps[p].steps[v].changeInValue,O=this.animatedProps[p].steps[v].totalStepIteration,M=A<O?parseInt(R[x](A,I.r,P.r,O)):E.r,L=A<O?parseInt(R[x](A,I.g,P.g,O)):E.g,C=A<O?parseInt(R[x](A,I.b,P.b,O)):E.b,T=A<O?Number(R[x](A,I.a,P.a,O).toFixed(2)):E.a;this.computedAnimations[b][p]="rgba("+M+","+L+","+C+","+T+")"}else if(/\d/g.test(this.animatedProps[p].steps[v].startValue)){var F=this.animatedProps[p].steps[v].easing||"linearEase",_=this.animatedProps[p].steps[v].currentIteration,U=this.animatedProps[p].steps[v].startValue,z=this.animatedProps[p].steps[v].endValue,D=this.animatedProps[p].steps[v].changeInValue,j=this.animatedProps[p].steps[v].totalStepIteration,V=_<j-1?R[F](_,U,D,j):z;this.computedAnimations[b][p]=V+this.animatedProps[p].steps[v].unit}else{var W=(this.animatedProps[p].steps[v].easing||"linearEase",this.animatedProps[p].steps[v].currentIteration),X=this.animatedProps[p].steps[v].startValue,Y=this.animatedProps[p].steps[v].endValue,N=(this.animatedProps[p].steps[v].changeInValue,this.animatedProps[p].steps[v].totalStepIteration),q=W<N-1?X:Y;this.computedAnimations[b][p]=q+this.animatedProps[p].steps[v].unit}b>=this.animatedProps[p].steps[v].initIteration&&this.animatedProps[p].steps[v].currentIteration<=this.animatedProps[p].steps[v].totalStepIteration&&this.animatedProps[p].steps[v].currentIteration++}return this},t.prototype.interpolateStep=function(t,e,i){var n=this.computedAnimations.length;return n<=0&&this.preInterpolateStep(i),t<=1&&!this.animationStarted&&(T.dispatchEvent(this.uuid+"-animationStart"),this.currentIteration=t,this.applyIteration()),n>t&&(this.animated=!0,this.currentIteration=t,this.applyIteration(),this.checkBreakpoints()),n===t&&(this.stopAnimation(),this.currentIteration=n-1,T.dispatchEvent(this.uuid+"-animationEnd")),this},t.prototype.applyIteration=function(){if(this.computedAnimations[this.currentIteration]){var t=Object.create(this.computedAnimations[this.currentIteration]);for(var e in this.computedAnimations[this.currentIteration])g(e)||(this.dispatchEvent(e,{value:this.computedAnimations[this.currentIteration][e]}),delete t[e]);this.applyStyle(t)}},t.prototype.restartAnimation=function(){this.stopAnimation(),this.counter=0,this.runAnimation()},t.prototype.startAnimation=function(){this.animationStarted=!0,this.runAnimation()},t.prototype.stopAnimation=function(){this.animationStarted=!1,this.animated=!1,window.cancelAnimationFrame(this.rafID)},t.prototype.runAnimation=function(){var t=this;if(this.rafID=window.requestAnimationFrame(function(e){t.runAnimation()}),Object.keys(this.currentAnimation).length>0)if(this.now=performance.now()||Date.now(),this.delta=this.now-this.then,this.animationStarted){if(this.delta>this.interval){this.then=this.now-this.delta%this.interval,this.reverse?(this.counter<=0&&(this.counter=this.totalIteration),this.counter--):this.counter++;var e=performance.now()||Date.now(),i=(new Date(e-this.startTime),this.counter/this.totalIteration*this.totalTime);this.secondsElapsed=isFinite(i)?Number(i).toFixed(2):0,this.interpolateStep(this.counter,this.secondsElapsed,this.fps),this.counter>=this.totalIteration&&!this.reverse?this.repeat>0&&this.repeatCounter<this.repeat&&(this.counter=0,this.repeatCounter++):1==this.counter&&this.reverse&&this.repeat>0&&this.repeatCounter<this.repeat&&(this.counter=0,this.repeatCounter++)}}else this.animationStarted=!0,this.totalTime=Number(this.getSortedSteps()[this.getSortedSteps().length-1]),this.totalIteration=this.totalTime*this.fps},t.prototype.addListener=function(t,e,i){return i=i||/global/gi.test(t),i?T.addListener(t,e):T.addListener(this.uuid+"-"+t,e)},t.prototype.removeListener=function(t,e,i){return i=i||/global/gi.test(t),i?e instanceof Function?T.removeListener(t,e):T.removeListener(t,this[e]):e instanceof Function?T.removeListener(this.uuid+"-"+t,e):T.removeListener(this.uuid+"-"+t,this[e])},t.prototype.dispatchEvent=function(t,e,i){return i=i||/global/gi.test(t),i?T.dispatchEvent(t,e,this):T.dispatchEvent(this.uuid+"-"+t,e,this)},t.prototype.changeAnimation=function(t){this.animations[this.selectedAnimation]=this.currentAnimation,this.selectedAnimation=t,this.computedSteps=[],this.currentAnimation=this.animations[this.selectedAnimation]||{},this.animations[this.selectedAnimation]=this.animations[this.selectedAnimation]||this.currentAnimation,this.applyStyle(this._style),this.stopAnimation(),this.preInterpolateStep(this.timeline?this.timeline.fps:this.fps),this.timeline&&(this.timeline.computeSteps(),this.timeline.stop()),this.timeline&&this.timeline.UI&&this.timeline.UI.insertInterface()},t.prototype.addAnimationProperties=function(t){var e=this,i=Object.keys(this.animatedProps),n=this.timeline?Number(this.timeline.secondsElapsed):0;return n=0===n?0:n,t.forEach(function(t,s){var r=t.key||t,o=t.value||e._style[r]||0;i.indexOf(r)===-1&&(e.currentAnimation[n]||(e.currentAnimation[n]={}),e.currentAnimation[n][r]=o)}),this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline?this.timeline.fps:this.fps),this.timeline&&this.timeline.computeSteps(),this.timeline&&this.timeline.UI&&this.timeline.UI.insertInterface(),this},t.prototype.deleteAnimationProperties=function(t){var e=this;return t.forEach(function(t,i){for(var n in e.currentAnimation)for(var s in e.currentAnimation[n])s===t&&delete e.currentAnimation[n][s]}),this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline.fps||this.fps),this.timeline&&this.timeline.computeSteps(),this.dispatchEvent("actualize-timeline-elements",{},!0),this},t.prototype.deleteAnimationKeyframe=function(t,e){return this.currentAnimation[t]?(e?delete this.currentAnimation[t][e]:delete this.currentAnimation[t],1===Object.keys(this.currentAnimation[t]).length&&delete this.currentAnimation[t],this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline.fps||this.fps),this.timeline&&this.timeline.computeSteps(),this.dispatchEvent("actualize-timeline-elements",{},!0)):console.log("animation at "+t+" don't exist"),this},t.prototype.addAnimationKeyframe=function(t,e,i){return this.currentAnimation[t]||(this.currentAnimation[t]={}),this.currentAnimation[t][e]=i,this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline.fps||this.fps),this.timeline&&this.timeline.computeSteps(),this.dispatchEvent("actualize-timeline-elements",{},!0),this},t.prototype.getSortedSteps=function(){var t=Object.keys(this.currentAnimation).map(function(t,e){return parseFloat(t)});t.sort(function(t,e){return t-e}),this.numericSteps=t;for(var e in this.currentAnimation)/\d\.\d{2}/.test(e)?0===Object.keys(this.currentAnimation[e]).length&&delete this.currentAnimation[e]:(this.currentAnimation[parseFloat(e).toFixed(2)]=this.currentAnimation[e],delete this.currentAnimation[e]);return this.numericSteps},t.prototype.getTotalAnimationTime=function(){return this.getSortedSteps(),this.totalAnimationTime=S(this.numericSteps),this.totalAnimationTime},t.prototype.exportToJSON=function(){var t={};t.exportedEvents={},t.exportedFunctions={},t.childs=[];for(var e in this)"undefined"!=typeof this[e]&&null!==this[e]&&("function"==typeof this[e]||this[e].element||this[e].children||this[e].elements||/exportedFunctions|exportedEvents|childs|interval|then|now|delta|animated|animationStarted|currentIteration|computedAnimations|totalTime|secondsElapsed|rafID|numericSteps|counter|totalIteration|animationStarted|direction|coords|bounds|geo|infowindow|map|marker|shop/.test(e)||(t[e]=this[e]));for(var i in this.events){var n=this.events[i].toString(),s=n.slice(n.indexOf("(")+1,n.indexOf(")")).split(","),r=n.slice(n.indexOf("{")+1,n.lastIndexOf("}"));t.exportedEvents[i]={args:s.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),body:r}}for(var o in this.functions){var a=this.functions[o].toString(),l=a.slice(a.indexOf("(")+1,a.indexOf(")")).split(","),d=a.slice(a.indexOf("{")+1,a.lastIndexOf("}"));t.exportedFunctions[o]={args:l.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),body:d}}return this.childs.forEach(function(e){t.childs.push(e.exportToJSON())}),t.style=this._style,t.attributes=this.attributes,t.breakpoints=this.breakpoints,t.globalStyle=this.globalStyle,t.data=this.data||{},t.currentAnimation=this.currentAnimation,t.load=!0,t.type=this.type,t.data.absoluteAssetURL=this.data.absoluteAssetURL||"./",t},t.prototype.setAbsoluteAssetURL=function(t){window[_.namespace]&&t&&t.data?"undefined"!=typeof window[_.namespace].absoluteAssetURL&&"undefined"!==window[_.namespace].absoluteAssetURL&&""!==window[_.namespace].absoluteAssetURL?this.data.absoluteAssetURL=window[_.namespace].absoluteAssetURL:"undefined"!=typeof t.data.absoluteAssetURL&&""!==t.data.absoluteAssetURL&&"./"!==t.data.absoluteAssetURL?window[_.namespace].absoluteAssetURL=t.data.absoluteAssetURL:this.data.absoluteAssetURL="./":t?this.data.absoluteAssetURL=t.data&&"undefined"!=typeof t.data.absoluteAssetURL&&""!==t.data.absoluteAssetURL?t.data.absoluteAssetURL:"./":this.data.absoluteAssetURL="./"},t.prototype.loadFromJSON=function(e){var i=this;for(var n in e)"animations"!==n||e.animations.default?this[n]=e[n]:(this.currentAnimation=e.animations,this.animations={},this.animations.default=e.animations);for(var s in e.exportedEvents){var r=e.exportedEvents[s].args.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),o=e.exportedEvents[s].body;this.events[s]=new Function(r,o)}for(var a in e.exportedFunctions){var l=e.exportedFunctions[a].args.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),d=e.exportedFunctions[a].body;this.functions[a]=new Function(l,d)}e.childs&&e.childs.forEach(function(n,s){n.load=!0,e.data&&(n.data=n.data||{},n.data.autostart=h(n.data.autostart),n.data.absoluteAssetURL=n.data.absoluteAssetURL||""),n.DOMParent=i,i.childs[s]=new t(n)}),this.uuid=E(),this.data=e.data||{},this.type=e.type,this.data.absoluteAssetURL=e.data&&e.data.absoluteAssetURL?e.data.absoluteAssetURL:"",this.data.autostart=!e.data||h(e.data.autostart),this.setAbsoluteAssetURL(e)},t}();return z}();
