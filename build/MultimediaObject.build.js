var MultimediaObject=function(){"use strict";function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var raf=function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+n)},n);return t=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},type=function(t){var e=t.constructor.toString();return e.match(/function (.*)\(/)[1]},Set=function(){function t(e){_classCallCheck$1(this,t),this.obj={},e&&this.add(e)}return t.prototype.contains=function(t){return 1===this.obj[t]},t.prototype.add=function(t){var e=void 0,i=void 0,n=void 0;if("string"!=typeof t&&"number"!=typeof t&&type(t).indexOf("Array")<0)throw new Error("you can only add an array, a string or a number");if("string"==typeof t||"number"==typeof t)this.obj[t]=1;else for(e=0,i=t.length;e<i;e++)n=t[e],this.obj[n]=1},t}(),pxPropertiesArray=["baselineShift","border","borderBottom","borderBottomLeftRadius","borderBottomRightRadius","borderBottomWidth","borderImageOutset","borderImageWidth","borderLeft","borderLeftWidth","borderRadius","borderRight","borderRightWidth","borderSpacing","borderTop","borderTopLeftRadius","borderTopRightRadius","borderTopWidth","borderWidth","bottom","columnGap","columnRule","columnRuleWidth","columnWidth","cx","cy","flexBasis","fontSize","left","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","maxHeight","maxWidth","minHeight","minWidth","motion","offset","offsetDistance","outlineOffset","outlineWidth","paddingBottom","paddingLeft","paddingRight","paddingTop","perspective","r","right","rx","ry","shapeMargin","size","strokeDasharray","strokeDashoffset","strokeWidth","tabSize","textIndent","top","webkitBorderAfterWidth","webkitBorderBeforeWidth","webkitBorderEndWidth","webkitBorderHorizontalSpacing","webkitBorderStartWidth","webkitBorderVerticalSpacing","webkitFontSizeDelta","webkitLogicalHeight","webkitLogicalWidth","webkitMarginAfter","webkitMarginBefore","webkitMarginEnd","webkitMarginStart","webkitMaskBoxImageOutset","webkitMaskBoxImageWidth","webkitMaskPosition","webkitMaskPositionX","webkitMaskPositionY","webkitMaskSize","webkitMaxLogicalHeight","webkitMaxLogicalWidth","webkitMinLogicalHeight","webkitMinLogicalWidth","webkitPaddingAfter","webkitPaddingBefore","webkitPaddingEnd","webkitPaddingStart","webkitPerspectiveOriginX","webkitPerspectiveOriginY","webkitTextStroke","webkitTextStrokeWidth","width","wordSpacing","x","y","baseline-shift","border-bottom","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-image-outset","border-image-width","border-left","border-left-width","border-radius","border-right","border-right-width","border-spacing","border-top","border-top-left-radius","border-top-right-radius","border-top-width","border-width","column-gap","column-rule","column-rule-width","column-width","flex-basis","font-size","letter-spacing","line-height","margin-bottom","margin-left","margin-right","margin-top","max-height","max-width","min-height","min-width","offset-distance","outline-offset","outline-width","padding-bottom","padding-left","padding-right","padding-top","shape-margin","stroke-dasharray","stroke-dashoffset","stroke-width","tab-size","text-indent","webkit-border-after-width","webkit-border-before-width","webkit-border-end-width","webkit-border-horizontal-spacing","webkit-border-start-width","webkit-border-vertical-spacing","webkit-font-size-delta","webkit-logical-height","webkit-logical-width","webkit-margin-after","webkit-margin-before","webkit-margin-end","webkit-margin-start","webkit-mask-box-image-outset","webkit-mask-box-image-width","webkit-mask-position","webkit-mask-position-x","webkit-mask-position-y","webkit-mask-size","webkit-max-logical-height","webkit-max-logical-width","webkit-min-logical-height","webkit-min-logical-width","webkit-padding-after","webkit-padding-before","webkit-padding-end","webkit-padding-start","webkit-text-stroke","webkit-text-stroke-width","webkit-transform-origin-x","webkit-transform-origin-y","webkit-transform-origin-z","word-spacing","translateX","translateY","translateZ","translate-x","translate-y","translate-z","translate"],stylePropertiesArray=["background","flex","flexGrow","flexShrink","objectPosition","transformOrigin","alignContent","alignItems","alignSelf","alignmentBaseline","all","animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","backfaceVisibility","background","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundRepeatX","backgroundRepeatY","borderBottomColor","borderBottomStyle","borderCollapse","borderColor","borderImage","borderImageRepeat","borderImageSlice","borderImageSource","borderLeftColor","borderLeftStyle","borderRightColor","borderRightStyle","borderStyle","borderTopColor","borderTopStyle","boxShadow","boxSizing","breakAfter","breakBefore","breakInside","bufferedRendering","captionSide","clear","clip","clipPath","clipRule","color","colorInterpolation","colorInterpolationFilters","colorRendering","columnCount","columnFill","columnRuleColor","columnRuleStyle","columnSpan","columns","contain","content","counterIncrement","counterReset","cursor","d","direction","display","dominantBaseline","emptyCells","fill","fillOpacity","fillRule","filter","flexDirection","flexFlow","flexWrap","float","floodColor","floodOpacity","font","fontFamily","fontFeatureSettings","fontKerning","fontStretch","fontStyle","fontVariant","fontVariantCaps","fontVariantLigatures","fontVariantNumeric","fontWeight","hyphens","imageRendering","isolation","justifyContent","lightingColor","listStyle","listStyleImage","listStylePosition","listStyleType","marker","markerEnd","markerMid","markerStart","mask","maskType","maxZoom","minZoom","mixBlendMode","objectFit","offsetPath","offsetRotation","opacity","order","orientation","orphans","outline","outlineColor","outlineStyle","overflow","overflowWrap","overflowX","overflowY","page","pageBreakAfter","pageBreakBefore","pageBreakInside","paintOrder","perspectiveOrigin","pointerEvents","position","quotes","resize","shapeImageThreshold","shapeOutside","shapeRendering","speak","src","stopColor","stopOpacity","stroke","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","tableLayout","textAlign","textAlignLast","textAnchor","textCombineUpright","textDecoration","textOrientation","textOverflow","textRendering","textShadow","textSizeAdjust","textTransform","touchAction","transform","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","unicodeBidi","unicodeRange","userSelect","userZoom","vectorEffect","visibility","vertical-align","verticalAlign","webkitAppRegion","webkitAppearance","webkitBackgroundClip","webkitBackgroundOrigin","webkitBorderAfter","webkitBorderAfterColor","webkitBorderAfterStyle","webkitBorderBefore","webkitBorderBeforeColor","webkitBorderBeforeStyle","webkitBorderEnd","webkitBorderEndColor","webkitBorderEndStyle","webkitBorderImage","webkitBorderStart","webkitBorderStartColor","webkitBorderStartStyle","webkitBoxAlign","webkitBoxDecorationBreak","webkitBoxDirection","webkitBoxFlex","webkitBoxFlexGroup","webkitBoxLines","webkitBoxOrdinalGroup","webkitBoxOrient","webkitBoxPack","webkitBoxReflect","webkitColumnBreakAfter","webkitColumnBreakBefore","webkitColumnBreakInside","webkitFontSmoothing","webkitHighlight","webkitHyphenateCharacter","webkitLineBreak","webkitLineClamp","webkitLocale","webkitMarginAfterCollapse","webkitMarginBeforeCollapse","webkitMarginBottomCollapse","webkitMarginCollapse","webkitMarginTopCollapse","webkitMask","webkitMaskBoxImage","webkitMaskBoxImageRepeat","webkitMaskBoxImageSlice","webkitMaskBoxImageSource","webkitMaskClip","webkitMaskComposite","webkitMaskImage","webkitMaskOrigin","webkitMaskRepeat","webkitMaskRepeatX","webkitMaskRepeatY","webkitPrintColorAdjust","webkitRtlOrdering","webkitRubyPosition","webkitTapHighlightColor","webkitTextCombine","webkitTextDecorationsInEffect","webkitTextEmphasis","webkitTextEmphasisColor","webkitTextEmphasisPosition","webkitTextEmphasisStyle","webkitTextFillColor","webkitTextOrientation","webkitTextSecurity","webkitTextStrokeColor","webkitUserDrag","webkitUserModify","webkitWritingMode","whiteSpace","widows","willChange","wordBreak","wordWrap","writingMode","zIndex","zoom","flex-grow","flex-shrink","object-position","transform-origin","align-content","align-items","align-self","alignment-baseline","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-repeat-x","background-repeat-y","border-bottom-color","border-bottom-style","border-collapse","border-color","border-image","border-image-repeat","border-image-slice","border-image-source","border-left-color","border-left-style","border-right-color","border-right-style","border-style","border-top-color","border-top-style","box-shadow","box-sizing","break-after","break-before","break-inside","buffered-rendering","caption-side","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-rendering","column-count","column-fill","column-rule-color","column-rule-style","column-span","counter-increment","counter-reset","dominant-baseline","empty-cells","fill-opacity","fill-rule","flex-direction","flex-flow","flex-wrap","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-stretch","font-style","font-variant","font-variant-caps","font-variant-ligatures","font-variant-numeric","font-weight","image-rendering","justify-content","lighting-color","list-style","list-style-image","list-style-position","list-style-type","marker-end","marker-mid","marker-start","mask-type","max-zoom","min-zoom","mix-blend-mode","object-fit","offset-path","offset-rotation","outline-color","outline-style","overflow-wrap","overflow-x","overflow-y","page-break-after","page-break-before","page-break-inside","paint-order","perspective-origin","pointer-events","shape-image-threshold","shape-outside","shape-rendering","stop-color","stop-opacity","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","touch-action","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","unicode-range","user-select","user-zoom","vector-effect","webkit-app-region","webkit-appearance","webkit-background-clip","webkit-background-origin","webkit-border-after","webkit-border-after-color","webkit-border-after-style","webkit-border-before","webkit-border-before-color","webkit-border-before-style","webkit-border-end","webkit-border-end-color","webkit-border-end-style","webkit-border-image","webkit-border-start","webkit-border-start-color","webkit-border-start-style","webkit-box-align","webkit-box-decoration-break","webkit-box-direction","webkit-box-flex","webkit-box-flex-group","webkit-box-lines","webkit-box-ordinal-group","webkit-box-orient","webkit-box-pack","webkit-box-reflect","webkit-column-break-after","webkit-column-break-before","webkit-column-break-inside","webkit-font-smoothing","webkit-highlight","webkit-hyphenate-character","webkit-line-break","webkit-line-clamp","webkit-locale","webkit-margin-after-collapse","webkit-margin-before-collapse","webkit-margin-bottom-collapse","webkit-margin-collapse","webkit-margin-top-collapse","webkit-mask","webkit-mask-box-image","webkit-mask-box-image-repeat","webkit-mask-box-image-slice","webkit-mask-box-image-source","webkit-mask-clip","webkit-mask-composite","webkit-mask-image","webkit-mask-origin","webkit-mask-repeat","webkit-mask-repeat-x","webkit-mask-repeat-y","webkit-print-color-adjust","webkit-rtl-ordering","webkit-ruby-position","webkit-tap-highlight-color","webkit-text-combine","webkit-text-decorations-in-effect","webkit-text-emphasis","webkit-text-emphasis-color","webkit-text-emphasis-position","webkit-text-emphasis-style","webkit-text-fill-color","webkit-text-orientation","webkit-text-security","webkit-text-stroke-color","webkit-user-drag","webkit-user-modify","webkit-writing-mode","white-space","will-change","word-break","word-wrap","writing-mode","z-index","zoom"],staticData={Atoms:{block:"div",div:"div",header:"header",footer:"footer",aside:"aside",article:"article",main:"main",nav:"nav",navigation:"nav",span:"span",text:"p",p:"p",paragraphe:"p","ulist-container":"ul",ulist:"ul",ul:"ul","unordered-list":"ul","olist-container":"ol",olist:"ol",ol:"ol","ordered-list":"ol","list-element":"li",li:"li",code:"pre",pre:"pre",input:"input",textarea:"textarea",form:"form",image:"img",img:"img",button:"button",iframe:"iframe",video:"video",canvas:"canvas",audio:"audio"},regex:{DOMEvent:new RegExp("^(click|mousedown|mouseup|mousemove|change|touchstart|touchmove|touchend|input|focus|dlclick|mouseenter|mouseleave|mouseover|mouseout|blur|search|submit|play|pause|canplay|progress)$"),animatableProps:new RegExp("^(background-color|translate|scale|rotate|skew|margin|padding|top|left|right|bottom|color|font-size|width|height|opacity)$")},sets:{pxProperties:pxPropertiesArray,degProperties:["rotate","rotate-x","rotate-y","rotate-z","rotate-x","rotate-y","rotate-z","skew","skewX","skewY","skewZ","skew-x","skew-y","skew-z"],transformProperties:["translate","translateX","translateY","translateZ","translateX","translate-x","translateY","translate-y","translate-z","scale","scaleX","scaleY","scaleZ","scale-x","scale-y","scale-z","rotate","rotateX","rotateY","rotateZ","rotate-x","rotate-y","rotate-z","skew","skewX","skewY","skewZ","skew-x","skew-y","skew-z","perspective","perspectiveX","perspectiveY","perspectiveZ","perspective-x","perspective-y","perspective-z"],styleProperties:stylePropertiesArray}},Atoms=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block",e=staticData.Atoms;return e[t]},checkEvent=function(t){return staticData.regex.DOMEvent.test(t)},closest=function(t,e){for(var i=e.sort(function(t,e){return t-e}),n=void 0,r=0;r<i.length;r++){var s=r;if(n=i[r],r>0&&(s=r-1),t<i[r]){n=t-i[s]<i[r]-t?i[s]:i[r];break}}return n},pxProperties=new Set(staticData.sets.pxProperties),degProperties=new Set(staticData.sets.degProperties),transformProperties=new Set(staticData.sets.transformProperties),styleProperties=new Set(staticData.sets.styleProperties),isAnimatableProp=function(t){return staticData.regex.animatableProps.test(t)},getNumFromString=function(t){if("string"==typeof t){var e=t.match(/-(?=\d)|\d+|\.\d+/g);return null!==e?parseFloat(e.join("")):0}return"number"!=typeof parseFloat(t)||isNaN(parseFloat(t))?0:parseFloat(t)},getUnitFromString=function(t){var e="";if("string"==typeof t){var i=t.match?t.match(/%|px|vh|vw|em|deg/g):null;e=null!==i?i[0]:""}return e},toDashed=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},prefixFor=function(t){var e=t.split("-"),i=["Webkit","Moz","ms"],n=void 0,r=void 0,s=void 0,o=void 0,a=void 0,l=void 0,d=void 0,h=void 0;if(void 0!==document.body.style[t])return"";for(h="",n=0,o=e.length;n<o;n++)d=e[n],h+=d.substring(0,1).toUpperCase()+d.substring(1);for(r=0,a=i.length;r<a;r++)if(l=i[r],s=l+h,void 0!==document.body.style[s])return l;return""},propertyWithPrefix=function(t){var e=prefixFor(t);return"Moz"===e?""+e+(t.substring(0,1).toUpperCase()+t.substring(1)):""!==e?"-"+e.toLowerCase()+"-"+toDashed(t):toDashed(t)},unitForProperty=function(t,e){if(pxProperties.contains(t)){var i=getUnitFromString(e);return""!==i?i:"px"}return degProperties.contains(t)?"deg":transformProperties.contains(t)?"":(styleProperties.contains(t),"")},getMaxOfArray=function(t){var e=void 0;if(t instanceof Array&&t.length>0&&(e=Math.max.apply(null,t)),!isNaN(e))return e;throw new Error("getMaxOfArray only works on an array")},transformValueForProperty=function(t,e){if(!transformProperties.contains(t))throw new Error(t+" is not a transform property");var i=0,n=void 0;i="string"==typeof e&&e.indexOf(",")>=0?e.split(","):getNumFromString(e),n=unitForProperty(t,e),t.indexOf("scale")>=0?n="":degProperties.contains(t)&&(n="deg");var r=t+"("+i+n+")";if(i instanceof Array){i=i.map(function(t){return getNumFromString(t)});var s="";i.forEach(function(t,e){s+=e>0?", "+t+n:""+t+n}),r=t+"("+s+")"}return{string:r,unit:n,value:i}},generateUUID=function(){var t=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(t+=performance.now());var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)});return e},cutHex=function(t){return"#"===t.charAt(0)?t.substring(1,7):t},hexToR=function(t){return parseInt(cutHex(t).substring(0,2),16)},hexToG=function(t){return parseInt(cutHex(t).substring(2,4),16)},hexToB=function(t){return parseInt(cutHex(t).substring(4,6),16)},transformToColor=function(t){var e=void 0;if("#"===t[0])e={r:hexToR(t),g:hexToG(t),b:hexToB(t),a:1};else{var i="string"==typeof t?t.indexOf("("):-1;i>=0&&(t=t.slice(i+1,t.length-1));var n="string"==typeof t?t.split(","):[0,0,0,0];e={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10),a:parseFloat(n[3]||1)}}return e},Easings={linearEase:function(t,e,i,n){return i*t/n+e},easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var r=1.70158,s=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return-(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/s))+e},easeOutElastic:function(t,e,i,n){var r=1.70158,s=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin((t*n-r)*(2*Math.PI)/s)+i+e},easeInOutElastic:function(t,e,i,n){var r=1.70158,s=0,o=i;if(0==t)return e;if(2==(t/=n/2))return e+i;if(s||(s=n*(.3*1.5)),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return t<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/s))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/s)*.5+i+e},easeInBack:function(t,e,i,n,r){return void 0==r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,n,r){return void 0==r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,n,r){return void 0==r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInBounce:function(t,e,i,n){return i-Easing.easeOutBounce(n-t,0,i,n)+e},easeOutBounce:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,i,n){return t<n/2?.5*Easing.easeInBounce(2*t,0,i,n)+e:.5*Easing.easeOutBounce(2*t-n,0,i,n)+.5*i+e}},EventManager=function(){this.listeners={}};EventManager.prototype={addListener:function(t,e){return this.listeners[t]?e instanceof Function&&this.listeners[t].indexOf(e)<0&&this.listeners[t].push(e):(this.listeners[t]=[],this.addListener(t,e)),this},dispatchEvent:function(t,e,i){return e=e||{},this.listeners[t]&&(i?this.listeners[t].forEach(function(t,n){t.call(i,e)}):this.listeners[t].forEach(function(t,i){t.call(window,e)})),this},removeListener:function(t,e){var i=this.listeners[t].indexOf(e);return i>0&&this.listeners[t].splice(i,1),this}};var eventManager=new EventManager,requireScript=function(){function t(t,e){for(var i=0,n=t.length;i<n;++i)if(!e(t[i]))return o;return 1}function e(e,i){t(e,function(t){return i(t),1})}function i(r,s,o){function l(t){return t.call?t():h[t]}function d(){if(!--w){h[g]=1,b&&b();for(var i in c)t(i.split("|"),l)&&!e(c[i],l)&&(c[i]=[])}}r=r[a]?r:[r];var f=s&&s.call,b=f?s:o,g=f?r.join(""):s,w=r.length;return setTimeout(function(){e(r,function t(e,i){return null===e?d():(i||/^https?:\/\//.test(e)||!m||(e=e.indexOf(".js")===-1?m+e+".js":m+e),p[e]?(g&&(u[g]=1),2==p[e]?d():setTimeout(function(){t(e,!0)},0)):(p[e]=1,g&&(u[g]=1),void n(e,d)))})},0),i}function n(t,e){var i=r.createElement("script"),n=void 0;i.onload=i.onerror=i[d]=function(){i[l]&&!/^c|loade/.test(i[l])||n||(i.onload=i[d]=null,n=1,p[t]=2,e())},i.async=1,i.src=f?t+(t.indexOf("?")===-1?"?":"&")+f:t,s.insertBefore(i,s.lastChild)}var r=document,s=r.getElementsByTagName("head")[0],o=!1,a="push",l="readyState",d="onreadystatechange",h={},u={},c={},p={},m=void 0,f=void 0;return i.get=n,i.order=function(t,e,n){!function r(s){s=t.shift(),t.length?i(s,r):i(s,e,n)}()},i.path=function(t){m=t},i.urlArgs=function(t){f=t},i.ready=function(n,r,s){n=n[a]?n:[n];var o=[];return!e(n,function(t){h[t]||o[a](t)})&&t(n,function(t){return h[t]})?r():!function(t){c[t]=c[t]||[],c[t][a](r),s&&s(o)}(n.join("|")),i},i.done=function(t){i([null],t)},i},conf={namespace:"_s4mConfig",container:"scene",defaultAttributes:{video:{src:"",type:"video/mp4",controls:"true",muted:"true",loop:"true",preload:"true",playsinline:"true"},img:{src:""},iframe:{src:""},form:{name:""},input:{name:""},audio:{src:""}}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};raf();var MultimediaObject=function(){function MultimediaObject(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"multimediaObject",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;_classCallCheck(this,MultimediaObject),"object"===("undefined"==typeof t?"undefined":_typeof(t))?(this.name=e||t.name,this.type=t.type||"block",this._style={},this.style={},this.events={},this._events={},this.functions={},this.breakpoints=[],this.selectedAnimation="default",this.currentAnimation={},this.animated=!1,this.computedAnimations=[],this.childs=[],this.dependencies=[],this.animatedProps={.02:{}},this.innerHTML="",this.fps=i,this.then=performance.now()||Date.now(),this.interval=1e3/this.fps,this.totalIteration=0,this.counter=0,this.reverse=!1,this.repeat=0,this.animationStarted=!1,this.loadFromJSON(t),this.applyFunctions(),this.addDefaultParameters(),this.init(),this.applyAttributes(),this.applyStyle(),this.applyEvents(),this.applyBreakpoints(),this.applyDependencies()):(this.uuid=generateUUID(),this.name=e,this.type=t,this.data={},this._style={},this.style={},this.attributes={},this.events={},this._events={},this.functions={},this.selectedAnimation="default",this.currentAnimation={},this.breakpoints=[],this.animated=!1,this.computedAnimations=[],this.childs=[],this.dependencies=[],this.animatedProps={.02:{}},this.innerHTML="",this.DOMParent=null,this.fps=i,this.then=performance.now()||Date.now(),this.interval=1e3/this.fps,this.totalIteration=0,this.counter=0,this.reverse=!1,this.repeat=0,this.animationStarted=!1,this.init(),this.addDefaultParameters())}return MultimediaObject.prototype.init=function(){var t=this;this.generate(Atoms(this.type)),this.element.innerHTML=this.innerHTML,this.getSortedSteps(),window.MultimediaObjectEditor||(this.DOMParent instanceof MultimediaObject||(window[conf.namespace]?this.appendElementTo(document.getElementById(window[conf.namespace].containerId)):this.appendElementTo()),this.data.autostart?this.startAnimation():this.addListener("startAfterPreload",function(){return t.startAnimation()},!0)),this.attributes&&!this.attributes.id&&this.applyAttributes({id:this.name})},MultimediaObject.prototype.addDefaultParameters=function(){if(conf.defaultAttributes[this.type]&&!this.load)for(var t in conf.defaultAttributes[this.type])this.attributes[t]||(this.attributes[t]=conf.defaultAttributes[this.type][t]);this.data.autostart="undefined"==typeof this.data.autostart||this.data.autostart,this.element&&this.applyAttributes()},MultimediaObject.prototype.checkDep=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push",i=this.dependencies.indexOf(t);switch(e){case"splice":i>=0&&this.dependencies.splice(i,1);break;case"push":default:i<0&&this.dependencies.push(t)}},MultimediaObject.prototype.applyDependencies=function(t){var e=this;return t=t||this.dependencies,t instanceof Array?t.forEach(function(t){e.checkDep(t)}):this.checkDep(t),this},MultimediaObject.prototype.removeDependencies=function(t){var e=this;return t=t||this.dependencies,t instanceof Array?t.forEach(function(t){e.checkDep(t,"splice")}):this.checkDep(t,"splice"),this},MultimediaObject.prototype.requireDependencies=function(t){this.dependencies.length>0?(requireScript(this.dependencies,"dependencies"),requireScript.ready("dependencies",t)):t()},MultimediaObject.prototype.addGlobalStyle=function(t,e){var i=document.createElement("style"),n=t;return i.innerHTML=n,i.id=this.uuid+"-style",i.type="text/css",document.head.appendChild(i),e&&window.setTimeout(e,100),this},MultimediaObject.prototype.applyStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.style,e=arguments[1],i=void 0,n=[],r=void 0,s=Object.keys(this._style).length;e=e||!1;for(i in t)if(r=t[i],transformProperties.contains(i)){n.push([i,r]);var o=transformValueForProperty(i,r),a=""+o.value+o.unit;(s<1||e)&&(this._style[i]=a),this.style[i]=a}else if(pxProperties.contains(i)){var l=""+getNumFromString(r)+unitForProperty(i,r);(s<1||e)&&(this._style[i]=l),this.style[i]=l,this.element.style[i]=l}else if(styleProperties.contains(i))(s<1||e)&&(this._style[i]=r),this.style[i]=r,this.element.style[i]=r;else{var d=""+r+unitForProperty(i,r);this.style[propertyWithPrefix(i)]=d,(s<1||e)&&(this._style[propertyWithPrefix(i)]=d),r.indexOf("{{absoluteAssetURL}}")>=0&&window[conf.namespace]&&(r=r.replace("{{absoluteAssetURL}}",window.MultimediaObjectEditor?this.data.absoluteAssetURL:window[conf.namespace].absoluteAssetURL)),this.element.style[propertyWithPrefix(i)]=r}var h=[0,1,2,3],u={x:this._style.translateX?getNumFromString(this._style.translateX):0,y:this._style.translateY?getNumFromString(this._style.translateY):0,z:this._style.translateZ?getNumFromString(this._style.translateZ):0,xU:this._style.translateX?getUnitFromString(this._style.translateX):"px",yU:this._style.translateY?getUnitFromString(this._style.translateY):"px",zU:this._style.translateZ?getUnitFromString(this._style.translateZ):"px"},c={value:this._style.rotate?getNumFromString(this._style.rotate):0,u:"deg"},p={x:this._style.skewX?getNumFromString(this._style.skewX):0,y:this._style.skewY?getNumFromString(this._style.skewY):0,u:"deg"},m={x:this._style.scaleX?getNumFromString(this._style.scaleX):1,y:this._style.scaleY?getNumFromString(this._style.scaleY):1};return n.length>0&&(r=n.map(function(t){return transformValueForProperty(t[0],t[1]).string}),r.forEach(function(t){t.indexOf("translateX")>=0||t.indexOf("translate-x")>=0?(u.x=getNumFromString(t),u.xU=getUnitFromString(t)):t.indexOf("translateY")>=0||t.indexOf("translate-y")>=0?(u.y=getNumFromString(t),u.yU=getUnitFromString(t)):(t.indexOf("translateZ")>=0||t.indexOf("translate-z")>=0)&&(u.z=getNumFromString(t),u.zU=getUnitFromString(t)),t.indexOf("rotate")>=0&&(c.value=getNumFromString(t)),t.indexOf("scaleX")>=0||t.indexOf("scale-x")>=0?m.x=getNumFromString(t):t.indexOf("scaleY")>=0||t.indexOf("scale-y")>=0?m.y=getNumFromString(t):t.indexOf("scale")>=0&&(m.x=getNumFromString(t),m.y=getNumFromString(t)),t.indexOf("skewX")>=0||t.indexOf("skew-x")>=0?p.x=getNumFromString(t):t.indexOf("skewY")>=0||t.indexOf("skew-y")>=0?p.y=getNumFromString(t):t.indexOf("skew")>=0&&(p.x=getNumFromString(t),p.y=getNumFromString(t))}),h[0]="translate3d("+u.x+u.xU+","+u.y+u.yU+","+u.z+u.zU+")",h[1]="rotate("+c.value+c.u+")",h[2]="skew("+p.x+p.u+","+p.y+p.u+")",h[3]="scale("+m.x+","+m.y+")",h=h.filter(function(t){return!/^[0-9]/.test(t)}).join(" "),this.element.style[propertyWithPrefix("transform")]=h),eventManager.dispatchEvent("actualize-style",this._style),this},MultimediaObject.prototype.applyFunctions=function(t){if(t)for(var e in t)this[e]=t[e],this.functions[e]=t[e];else for(var i in this.functions)this[i]=this.functions[i];return this},MultimediaObject.prototype.applyAttributes=function(t){if(t)for(var e in t){var i=t[e];"string"==typeof t[e]&&t[e].indexOf("{{absoluteAssetURL}}")>=0&&window[conf.namespace]&&(i=t[e].replace("{{absoluteAssetURL}}",window.MultimediaObjectEditor?this.data.absoluteAssetURL:window[conf.namespace].absoluteAssetURL)),this.attributes[e]=t[e],this.element.setAttribute(e,i||t[e])}else for(var n in this.attributes){var r=this.attributes[n];"string"==typeof this.attributes[n]&&this.attributes[n].indexOf("{{absoluteAssetURL}}")>=0&&window[conf.namespace]&&(r=this.attributes[n].replace("{{absoluteAssetURL}}",window.MultimediaObjectEditor?this.data.absoluteAssetURL:window[conf.namespace].absoluteAssetURL)),this.element.setAttribute(n,r||this.attributes[n])}return this},MultimediaObject.prototype.applyBreakpoints=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(this.breakpoints.length>0||e.length>0)&&(e.forEach(function(e,i){t.breakpoints.indexOf(e)===-1&&t.breakpoints.push(e)}),this.checkBreakpoints()),this},MultimediaObject.prototype.applyEvents=function(t){var e=this,i=function(t){var i=!!("ontouchstart"in window)||!!("ontouchstart"in document.documentElement)||!!window.ontouchstart||!!window.onmsgesturechange||window.DocumentTouch&&window.document instanceof window.DocumentTouch,n=e,r={};n.evtStarted=!1,e.evtStart=function(t){t.preventDefault();
var e=t.changedTouches?t.changedTouches[0]:t;n.evtStarted=!0,r={start:{left:e.pageX,top:e.pageY}}},e.evtEnd=function(e){if(e.preventDefault(),n.evtStarted){var i=e.changedTouches?e.changedTouches[0]:e;r.end={left:i.pageX,top:i.pageY},r.dx=r.end.left-r.start.left,r.dy=r.end.top-r.start.top,r.angle=Math.atan2(r.dy,r.dx),r.angle*=180/Math.PI,r.inMotion="touchmove"===e.type||"mousemove"===e.type,r.direction=Math.abs(r.dx)>Math.abs(r.dy)?(""+r.dx).indexOf("-")!==-1?"left":"right":(""+r.dy).indexOf("-")!==-1?"top":"bottom",n.events[t].apply(n,[e,r]),r.inMotion===!1&&(n.evtStarted=!1)}},i?(e.element.addEventListener("touchstart",e.evtStart,!1),e.element.addEventListener("touchmove",e.evtEnd,!1),e.element.addEventListener("touchend",e.evtEnd,!1)):(e.element.addEventListener("mousedown",e.evtStart,!1),e.element.addEventListener("mousemove",e.evtEnd,!1),e.element.addEventListener("mouseup",e.evtEnd,!1))};if(t)for(var n in t)this.events[n]=t[n],this._events[n]=this.transformEvent(t[n]),checkEvent(n)&&"swipe"!==n?this.element.addEventListener(n,this._events[n]):"swipe"===n?i(n):this.addListener(n,this.events[n]);else if(Object.keys(this.events).length>0)for(var r in this.events)"swipe"===r?i(r):(this._events[r]=this.transformEvent(this.events[r]),checkEvent(r)?this.element.addEventListener(r,this._events[r]):this.addListener(r,this.events[r]));return this},MultimediaObject.prototype.removeEvent=function(t){return checkEvent(t)?this.events[t]?(this.element.removeEventListener(t,this._events[t]),delete this.events[t],delete this._events[t]):console.log("Event does not exist"):"swipe"===t?(this.element.removeEventListener("touchstart",this.evtStart),this.element.removeEventListener("touchmove",this.evtEnd),this.element.removeEventListener("touchend",this.evtEnd),this.element.removeEventListener("mousedown",this.evtStart),this.element.removeEventListener("mousemove",this.evtEnd),this.element.removeEventListener("mouseup",this.evtEnd),delete this.events[t],delete this._events[t]):this.events[t]?(this.removeListener(t,this._events[t]),delete this.events[t],delete this._events[t]):console.log("Event does not exist"),this},MultimediaObject.prototype.deactivateEvent=function(t){this.events[t]?checkEvent(t)?this.element.removeEventListener(t,this._events[t]):"swipe"===t?(this.element.removeEventListener("touchstart",this.evtStart),this.element.removeEventListener("touchmove",this.evtEnd),this.element.removeEventListener("touchend",this.evtEnd),this.element.removeEventListener("mousedown",this.evtStart),this.element.removeEventListener("mousemove",this.evtEnd),this.element.removeEventListener("mouseup",this.evtEnd)):this.removeListener(t,this._events[t]):console.log("Event does not exist")},MultimediaObject.prototype.removeFunction=function(t){return this.functions[t]?delete this.functions[t]:console.log("Function does not exist"),this},MultimediaObject.prototype.removePropertie=function(t,e){var i=this;switch(t){case"attributes":this.attributes[e]?(this.element.removeAttribute(e),delete this.attributes[e]):console.log(e+" attribute does not exist");break;case"data":this.data[e]?delete this.data[e]:console.log(e+" data does not exist");break;case"style":default:if(this._style[e]){this.element.style[propertyWithPrefix(e)]="",this.element.style[e]="",transformProperties.contains(e)&&(this.element.style[propertyWithPrefix("transform")]="",this.element.style.transform=""),delete this.style[e],delete this._style[e];var n=function(){for(var t=Object.keys(i._style),e=!1,n=0;n<t.length;n++)if(transformProperties.contains(t[n])){e=!0;break}return e}();n||(delete this.style.transform,delete this._style.transform,delete this.style[propertyWithPrefix("transform")],delete this._style[propertyWithPrefix("transform")])}else this.style[e]?(transformProperties.contains(e)&&(this.element.style[propertyWithPrefix("transform")]="",this.element.style.transform=""),this.element.style[propertyWithPrefix(e)]="",this.element.style[e]="",delete this.style[e]):console.log(e+" style does not exist")}return this},MultimediaObject.prototype.transformEvent=function(t){var e=this;return function(i){t.apply(e,[i])}},MultimediaObject.prototype.checkBreakpoints=function(){var t=this,e=window.MultimediaObjectEditor?"parseInt(getComputedStyle(document.getElementById('"+conf.container+"')).width)":"window.innerWidth",i=window.MultimediaObjectEditor?"parseInt(getComputedStyle(document.getElementById('"+conf.container+"')).height)":"window.innerHeight";this.breakpoints.length>0&&!function(){var n={};for(var r in t._style)n[r]=t._style[r];if(t.breakpoints.forEach(function(t,r){var s=[];for(var o in t.querie)"orientation"===o?s.push(""+("landscape"===t.querie[o]?e+" > "+i:i+" > "+e)):s.push((/height/.test(o)?i:e)+" "+(/min/.test(o)?">=":"<=")+" "+parseInt(t.querie[o]));var a="";if(s.forEach(function(t,e){a+=e>=1?" && "+t:t}),(a=new Function("return "+a))())for(var l in t.style)n[l]=t.style[l]}),t.computedAnimations.length>0)for(var s in t.computedAnimations[t.currentIteration])n[s]=t.computedAnimations[t.currentIteration][s];t.applyStyle(n)}()},MultimediaObject.prototype.generate=function(t){var e=this;return this.element=document.createElement(t),this.type=t,window.addEventListener("resize",function(){e.checkBreakpoints()}),eventManager.addListener("resize-scene",function(){e.checkBreakpoints()}),this},MultimediaObject.prototype.appendElementTo=function(t){var e=this;if(t){t instanceof MultimediaObject?t.element.appendChild(this.element):t.appendChild(this.element),this.DOMParent=t;var i=this.childs.length;i>0&&this.childs.forEach(function(t,i){t.DOMParent=e,t.appendElementTo(e)})}else{document.body.appendChild(this.element),this.DOMParent=document.body;var n=this.childs.length;n>0&&this.childs.forEach(function(t,i){t.DOMParent=e,t.appendElementTo(e)})}return this.initializer&&this.initializer(),this},MultimediaObject.prototype.add=function(t){return this.childs.push(t),t instanceof MultimediaObject?this.element.appendChild(t.element):this.element.appendChild(t),t.DOMParent=this,eventManager.dispatchEvent("actualize-DOM-elements"),this},MultimediaObject.prototype.remove=function(t){var e=this.childs.indexOf(t);return e>=0&&(this.childs.splice(e,1),t instanceof MultimediaObject?this.element.removeChild(t.element):this.element.removeChild(t),t.DOMParent=null),eventManager.dispatchEvent("actualize-DOM-elements"),this},MultimediaObject.prototype.getComputedStyle=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return getComputedStyle(this.element,null).getPropertyValue(t)}),MultimediaObject.prototype.preInterpolateStep=function(t){var e=this;this.getSortedSteps();var i=function(t){return Object.keys(e._events).join().indexOf(t)>=0},n=getMaxOfArray(this.numericSteps),r=Math.floor(n*t);this.animatedProps={};for(var s=void 0,o=0;o<this.numericSteps.length;o++){var a=this.numericSteps[o].toFixed(2);for(var l in this.currentAnimation[a])if("easing"!==l){this.animatedProps[l]||(this.animatedProps[l]={},this.animatedProps[l].label=l,this.animatedProps[l].steps={}),this.animatedProps[l].steps[a]||(this.animatedProps[l].steps[a]={});var d=Object.keys(this.animatedProps[l].steps),h=d.length>1?d[d.length-2]:void 0;if(s=h?this.animatedProps[l].steps[h]:void 0,/color/gi.test(l)){var u=transformToColor(this.currentAnimation[a][l]);this.animatedProps[l].steps[a].startValue=s?s.endValue:this._style[l]?transformToColor(this._style[l]):{r:0,g:0,b:0},this.animatedProps[l].steps[a].unit="string"==typeof this.currentAnimation[a][l]?getUnitFromString(this.currentAnimation[a][l]||""):"",this.animatedProps[l].steps[a].endValue=u,this.animatedProps[l].steps[a].changeInValue={r:this.animatedProps[l].steps[a].endValue.r-this.animatedProps[l].steps[a].startValue.r,g:this.animatedProps[l].steps[a].endValue.g-this.animatedProps[l].steps[a].startValue.g,b:this.animatedProps[l].steps[a].endValue.b-this.animatedProps[l].steps[a].startValue.b,a:this.animatedProps[l].steps[a].endValue.a-this.animatedProps[l].steps[a].startValue.a},this.animatedProps[l].steps[a].initIteration=h?Math.floor(h*t):0,this.animatedProps[l].steps[a].totalStepIteration=Math.floor(a*t-this.animatedProps[l].steps[a].initIteration),this.animatedProps[l].steps[a].easing=this.currentAnimation[a].easing,this.animatedProps[l].steps[a].currentIteration=0}else/\d/g.test(this.currentAnimation[a][l])?(this.animatedProps[l].steps[a].startValue=parseFloat(s?s.endValue:this._style[l]?parseFloat(this._style[l]):0),this.animatedProps[l].steps[a].unit="string"==typeof this.currentAnimation[a][l]&&/px|%/g.test(this.currentAnimation[a][l])?getUnitFromString(this.currentAnimation[a][l]||""):"",this.animatedProps[l].steps[a].endValue=parseFloat(this.currentAnimation[a][l]),this.animatedProps[l].steps[a].changeInValue=parseFloat(this.animatedProps[l].steps[a].endValue-this.animatedProps[l].steps[a].startValue),this.animatedProps[l].steps[a].initIteration=h?Math.floor(h*t):0,this.animatedProps[l].steps[a].totalStepIteration=Math.floor(a*t)-this.animatedProps[l].steps[a].initIteration,this.animatedProps[l].steps[a].easing=this.currentAnimation[a].easing,this.animatedProps[l].steps[a].currentIteration=0):(this.animatedProps[l].steps[a].startValue=s?s.endValue:this._style[l]?this._style[l]:"auto",this.animatedProps[l].steps[a].unit="",this.animatedProps[l].steps[a].endValue=this.currentAnimation[a][l],this.animatedProps[l].steps[a].changeInValue=this.animatedProps[l].steps[a].endValue,this.animatedProps[l].steps[a].initIteration=h?Math.floor(h*t):0,this.animatedProps[l].steps[a].totalStepIteration=Math.floor(a*t)-this.animatedProps[l].steps[a].initIteration,this.animatedProps[l].steps[a].easing=this.currentAnimation[a].easing,this.animatedProps[l].steps[a].currentIteration=0)}}this.computedAnimations=!this.computedAnimations||[];for(var c in this.animatedProps)if(i(c))for(var p in this.animatedProps[c].steps){var m=Math.floor(Number(p)*this.fps);this.computedAnimations[m]||(this.computedAnimations[m]={}),this.computedAnimations[m][c]=this.animatedProps[c].steps[p].endValue}else for(var f=0;f<=r;f++){var b=Object.keys(this.animatedProps[c].steps),g=f/r*n,w=isFinite(g)?Number(g).toFixed(2):0,y=closest(w,b);if(this.computedAnimations[f]||(this.computedAnimations[f]={}),/color/gi.test(c)){var k=this.animatedProps[c].steps[y].easing||"linearEase",v=this.animatedProps[c].steps[y].currentIteration,x=this.animatedProps[c].steps[y].startValue,A=this.animatedProps[c].steps[y].endValue,M=this.animatedProps[c].steps[y].changeInValue,S=this.animatedProps[c].steps[y].totalStepIteration,O=v<S?parseInt(Easings[k](v,x.r,M.r,S)):A.r,P=v<S?parseInt(Easings[k](v,x.g,M.g,S)):A.g,E=v<S?parseInt(Easings[k](v,x.b,M.b,S)):A.b,I=v<S?Number(Easings[k](v,x.a,M.a,S).toFixed(2)):A.a;this.computedAnimations[f][c]="rgba("+O+","+P+","+E+","+I+")"}else if(/\d/g.test(this.animatedProps[c].steps[y].startValue)){var j=this.animatedProps[c].steps[y].easing||"linearEase",F=this.animatedProps[c].steps[y].currentIteration,L=this.animatedProps[c].steps[y].startValue,B=this.animatedProps[c].steps[y].endValue,C=this.animatedProps[c].steps[y].changeInValue,R=this.animatedProps[c].steps[y].totalStepIteration,T=F<R-1?Easings[j](F,L,C,R):B;this.computedAnimations[f][c]=T+this.animatedProps[c].steps[y].unit}else{var _=(this.animatedProps[c].steps[y].easing||"linearEase",this.animatedProps[c].steps[y].currentIteration),U=this.animatedProps[c].steps[y].startValue,D=this.animatedProps[c].steps[y].endValue,z=(this.animatedProps[c].steps[y].changeInValue,this.animatedProps[c].steps[y].totalStepIteration),V=_<z-1?U:D;this.computedAnimations[f][c]=V+this.animatedProps[c].steps[y].unit}f>=this.animatedProps[c].steps[y].initIteration&&this.animatedProps[c].steps[y].currentIteration<=this.animatedProps[c].steps[y].totalStepIteration&&this.animatedProps[c].steps[y].currentIteration++}return this},MultimediaObject.prototype.interpolateStep=function(t,e,i){var n=this.computedAnimations.length;return n<=0&&this.preInterpolateStep(i),t<=1&&!this.animationStarted&&(eventManager.dispatchEvent(this.uuid+"-animationStart"),this.currentIteration=t,this.applyIteration()),n>t&&(this.animated=!0,this.currentIteration=t,this.applyIteration(),this.checkBreakpoints()),n===t&&(this.stopAnimation(),this.currentIteration=n-1,eventManager.dispatchEvent(this.uuid+"-animationEnd")),this},MultimediaObject.prototype.applyIteration=function(){if(this.computedAnimations[this.currentIteration]){var t=Object.create(this.computedAnimations[this.currentIteration]);for(var e in this.computedAnimations[this.currentIteration])isAnimatableProp(e)||(this.dispatchEvent(e,{value:this.computedAnimations[this.currentIteration][e]}),delete t[e]);this.applyStyle(t)}},MultimediaObject.prototype.restartAnimation=function(){this.stopAnimation(),this.counter=0,this.runAnimation()},MultimediaObject.prototype.startAnimation=function(){this.animationStarted=!0,this.runAnimation()},MultimediaObject.prototype.stopAnimation=function(){this.animationStarted=!1,this.animated=!1,window.cancelAnimationFrame(this.rafID)},MultimediaObject.prototype.runAnimation=function(){var t=this;if(this.rafID=window.requestAnimationFrame(function(e){t.runAnimation()}),Object.keys(this.currentAnimation).length>0)if(this.now=performance.now()||Date.now(),this.delta=this.now-this.then,this.animationStarted){if(this.delta>this.interval){this.then=this.now-this.delta%this.interval,this.reverse?(this.counter<=0&&(this.counter=this.totalIteration),this.counter--):this.counter++;var e=performance.now()||Date.now(),i=(new Date(e-this.startTime),this.counter/this.totalIteration*this.totalTime);this.secondsElapsed=isFinite(i)?Number(i).toFixed(2):0,this.interpolateStep(this.counter,this.secondsElapsed,this.fps),this.counter>=this.totalIteration&&!this.reverse?this.repeat>0&&this.repeatCounter<this.repeat&&(this.counter=0,this.repeatCounter++):1==this.counter&&this.reverse&&this.repeat>0&&this.repeatCounter<this.repeat&&(this.counter=0,this.repeatCounter++)}}else this.animationStarted=!0,this.totalTime=Number(this.getSortedSteps()[this.getSortedSteps().length-1]),this.totalIteration=this.totalTime*this.fps},MultimediaObject.prototype.addListener=function(t,e,i){return i=i||/global/gi.test(t),i?eventManager.addListener(t,e):eventManager.addListener(this.uuid+"-"+t,e)},MultimediaObject.prototype.removeListener=function(t,e,i){return i=i||/global/gi.test(t),i?e instanceof Function?eventManager.removeListener(t,e):eventManager.removeListener(t,this[e]):e instanceof Function?eventManager.removeListener(this.uuid+"-"+t,e):eventManager.removeListener(this.uuid+"-"+t,this[e])},MultimediaObject.prototype.dispatchEvent=function(t,e,i){return i=i||/global/gi.test(t),i?eventManager.dispatchEvent(t,e,this):eventManager.dispatchEvent(this.uuid+"-"+t,e,this)},MultimediaObject.prototype.changeAnimation=function(t){this.animations[this.selectedAnimation]=this.currentAnimation,this.selectedAnimation=t,this.computedSteps=[],this.currentAnimation=this.animations[this.selectedAnimation]||{},this.animations[this.selectedAnimation]=this.animations[this.selectedAnimation]||this.currentAnimation,this.applyStyle(this._style),this.stopAnimation(),this.preInterpolateStep(this.timeline?this.timeline.fps:this.fps),this.timeline&&(this.timeline.computeSteps(),this.timeline.stop()),this.timeline&&this.timeline.UI&&this.timeline.UI.insertInterface()},MultimediaObject.prototype.addAnimationProperties=function(t){var e=this,i=Object.keys(this.animatedProps),n=this.timeline?Number(this.timeline.secondsElapsed):0;return n=0===n?0:n,t.forEach(function(t,r){var s=t.key||t,o=t.value||e._style[s]||0;i.indexOf(s)===-1&&(e.currentAnimation[n]||(e.currentAnimation[n]={}),e.currentAnimation[n][s]=o)}),this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline?this.timeline.fps:this.fps),this.timeline&&this.timeline.computeSteps(),this.timeline&&this.timeline.UI&&this.timeline.UI.insertInterface(),this},MultimediaObject.prototype.deleteAnimationProperties=function(t){var e=this;return t.forEach(function(t,i){for(var n in e.currentAnimation)for(var r in e.currentAnimation[n])r===t&&delete e.currentAnimation[n][r]}),this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline.fps||this.fps),this.timeline&&this.timeline.computeSteps(),this.dispatchEvent("actualize-timeline-elements",{},!0),this},MultimediaObject.prototype.deleteAnimationKeyframe=function(t,e){return this.currentAnimation[t]?(e?delete this.currentAnimation[t][e]:delete this.currentAnimation[t],1===Object.keys(this.currentAnimation[t]).length&&delete this.currentAnimation[t],this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline.fps||this.fps),this.timeline&&this.timeline.computeSteps(),this.dispatchEvent("actualize-timeline-elements",{},!0)):console.log("animation at "+t+" don't exist"),this},MultimediaObject.prototype.addAnimationKeyframe=function(t,e,i){return this.currentAnimation[t]||(this.currentAnimation[t]={}),this.currentAnimation[t][e]=i,this.animations[this.selectedAnimation]=this.currentAnimation,this.preInterpolateStep(this.timeline.fps||this.fps),this.timeline&&this.timeline.computeSteps(),this.dispatchEvent("actualize-timeline-elements",{},!0),this},MultimediaObject.prototype.getSortedSteps=function(){var t=Object.keys(this.currentAnimation).map(function(t,e){return parseFloat(t)});t.sort(function(t,e){return t-e}),this.numericSteps=t;for(var e in this.currentAnimation)/\d\.\d{2}/.test(e)?0===Object.keys(this.currentAnimation[e]).length&&delete this.currentAnimation[e]:(this.currentAnimation[parseFloat(e).toFixed(2)]=this.currentAnimation[e],delete this.currentAnimation[e]);return this.numericSteps},MultimediaObject.prototype.getTotalAnimationTime=function(){return this.getSortedSteps(),this.totalAnimationTime=getMaxOfArray(this.numericSteps),this.totalAnimationTime},MultimediaObject.prototype.exportToJSON=function(){var t={};t.exportedEvents={},t.exportedFunctions={},t.childs=[];for(var e in this)"undefined"!=typeof this[e]&&null!==this[e]&&("function"==typeof this[e]||this[e].element||this[e].children||this[e].elements||/exportedFunctions|exportedEvents|childs|interval|then|now|delta|animated|animationStarted|currentIteration|computedAnimations|totalTime|secondsElapsed|rafID|numericSteps|counter|totalIteration|animationStarted|direction|coords|bounds|geo|infowindow|map|marker|shop/.test(e)||(t[e]=this[e]));for(var i in this.events){var n=this.events[i].toString(),r=n.slice(n.indexOf("(")+1,n.indexOf(")")).split(","),s=n.slice(n.indexOf("{")+1,n.lastIndexOf("}"));t.exportedEvents[i]={args:r.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),body:s}}for(var o in this.functions){var a=this.functions[o].toString(),l=a.slice(a.indexOf("(")+1,a.indexOf(")")).split(","),d=a.slice(a.indexOf("{")+1,a.lastIndexOf("}"));t.exportedFunctions[o]={args:l.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),body:d}}return this.childs.forEach(function(e){t.childs.push(e.exportToJSON())}),t.style=this._style,t.attributes=this.attributes,t.breakpoints=this.breakpoints,t.globalStyle=this.globalStyle,t.data=this.data||{},t.currentAnimation=this.currentAnimation,t.load=!0,t.type=this.type,t.data.absoluteAssetURL=this.data.absoluteAssetURL||"./",t},MultimediaObject.prototype.setAbsoluteAssetURL=function(t){window[conf.namespace]&&t?"undefined"!=typeof window[conf.namespace].absoluteAssetURL&&"undefined"!==window[conf.namespace].absoluteAssetURL&&""!==window[conf.namespace].absoluteAssetURL?this.data.absoluteAssetURL=window[conf.namespace].absoluteAssetURL:"undefined"!=typeof t.data.absoluteAssetURL&&""!==t.data.absoluteAssetURL&&"./"!==t.data.absoluteAssetURL?window[conf.namespace].absoluteAssetURL=t.data.absoluteAssetURL:this.data.absoluteAssetURL="./":this.data.absoluteAssetURL=t.data&&"undefined"!=typeof t.data.absoluteAssetURL&&""!==t.data.absoluteAssetURL?t.data.absoluteAssetURL:"./"},MultimediaObject.prototype.loadFromJSON=function loadFromJSON(json){var _this14=this;for(var key in json)"animations"!==key||json.animations.default?this[key]=json[key]:(this.currentAnimation=json.animations,this.animations={},this.animations.default=json.animations);for(var evt in json.exportedEvents){var args=json.exportedEvents[evt].args.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),body=json.exportedEvents[evt].body;this.events[evt]=new Function(args,body)}for(var func in json.exportedFunctions){var _args2=json.exportedFunctions[func].args.map(function(t){return t.replace(/\s+|\n+|(\/\*\*\/\n)+/g,"")}),_body2=json.exportedFunctions[func].body;this.functions[func]=new Function(_args2,_body2)}json.childs&&json.childs.forEach(function(child,index){child.load=!0,json.data&&(child.data=child.data||{},child.data.autostart=eval(child.data.autostart),child.data.absoluteAssetURL=child.data.absoluteAssetURL||""),child.DOMParent=_this14,_this14.childs[index]=new MultimediaObject(child)}),this.uuid=generateUUID(),this.data=json.data||{},this.type=json.type,this.data.absoluteAssetURL=json.data&&json.data.absoluteAssetURL?json.data.absoluteAssetURL:"",this.data.autostart=!json.data||eval(json.data.autostart),this.setAbsoluteAssetURL(json)},MultimediaObject}();return MultimediaObject}();
